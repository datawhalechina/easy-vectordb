<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>An efficient K-means clustering algorithm for massive data论文详解 | EasyVecDB 教程</title>
    <meta name="description" content="向量数据库学习与实战指南">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/easy-vecdb/assets/style.7PZEV1Fm.css" as="style">
    <link rel="preload stylesheet" href="/easy-vecdb/vp-icons.css" as="style">
    
    <script type="module" src="/easy-vecdb/assets/app.BWmjF2Cf.js"></script>
    <link rel="preload" href="/easy-vecdb/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/easy-vecdb/assets/chunks/theme.DvNcO5PS.js">
    <link rel="modulepreload" href="/easy-vecdb/assets/chunks/framework.CzE6cJJL.js">
    <link rel="modulepreload" href="/easy-vecdb/assets/more_chapter6_K-mean算法详解.md.BTJ9_1pl.lean.js">
    <link rel="icon" href="/easy-vecdb/favicon.ico">
    <meta name="theme-color" content="#3c8772">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><div class="announcement-banner">⚠️ Alpha内测版本警告：此为早期内部构建版本，尚不完整且可能存在错误，欢迎大家提Issue反馈问题或建议。</div><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/easy-vecdb/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/easy-vecdb/favicon.ico" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>EasyVecDB 教程</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/easy-vecdb/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/easy-vecdb/base/chapter1/%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>向量基础</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/easy-vecdb/Annoy/chapter1/Annoy%E5%85%A5%E9%97%A8%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Annoy 教程</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/easy-vecdb/Faiss/chapter1/FAISS%E5%85%A5%E9%97%A8%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Faiss 教程</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/easy-vecdb/Milvus/chapter1/Milvus%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%A5%E9%97%A8.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Milvus 教程</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/easy-vecdb/more/chapter5/%E5%90%91%E9%87%8F.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>补充内容</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/easy-vecdb/projects/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>实战项目</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/datawhalechina/easy-vecdb" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/datawhalechina/easy-vecdb" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Chapter 1 · FusionANNS</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/easy-vecdb/more/chapter1/GPU%E5%8A%A0%E9%80%9F%E6%A3%80%E7%B4%A2-%E5%9F%BA%E4%BA%8EFusionANNS.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>FusionANNS架构设计</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Chapter 2 · Meta-Chunking</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/easy-vecdb/more/chapter2/Meta-Chunking%EF%BC%9A%E4%B8%80%E7%A7%8D%E6%96%B0%E7%9A%84%E6%96%87%E6%9C%AC%E5%88%87%E5%88%86%E7%AD%96%E7%95%A5.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>全新的文本切分策略</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Chapter 3 · Limit</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/easy-vecdb/more/chapter3/Limit%E5%9F%BA%E4%BA%8E%E5%B5%8C%E5%85%A5%E6%A3%80%E7%B4%A2%E7%9A%84%E7%90%86%E8%AE%BA%E6%9E%81%E9%99%90.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>基于嵌入检索的理论极限</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/easy-vecdb/more/chapter3/Meta_limit/code/startup.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>实践操作</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Chapter 4 · RabitQ</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/easy-vecdb/more/chapter4/RabitQ%EF%BC%9A%E7%94%A8%E4%BA%8E%E8%BF%91%E4%BC%BC%E6%9C%80%E8%BF%91%E9%82%BB%E6%90%9C%E7%B4%A2%E7%9A%84%E5%B8%A6%E7%90%86%E8%AE%BA%E8%AF%AF%E5%B7%AE%E7%95%8C%E7%9A%84%E9%AB%98%E7%BB%B4%E5%90%91%E9%87%8F%E9%87%8F%E5%8C%96.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>RabitQ索引</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Chapter 5 · 稀疏、稠密向量</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/easy-vecdb/more/chapter5/%E5%90%91%E9%87%8F.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>向量基础知识</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>Chapter 6 · 聚类算法</h2><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/easy-vecdb/more/chapter6/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>两种聚类算法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/easy-vecdb/more/chapter6/K-mean%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>K-means聚类详解</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _easy-vecdb_more_chapter6_K-mean%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3" data-v-39a288b8><div><h1 id="an-efficient-k-means-clustering-algorithm-for-massive-data论文详解" tabindex="-1">An efficient K-means clustering algorithm for massive data论文详解 <a class="header-anchor" href="#an-efficient-k-means-clustering-algorithm-for-massive-data论文详解" aria-label="Permalink to &quot;An efficient K-means clustering algorithm for massive data论文详解&quot;">​</a></h1><p>关于这一部分，你将收获到K-means算法关于初始聚类点的计算以及优化方式，除此之外还有关于聚类边界的点集划分的计算。</p><p><strong>核心概念：快速判断一个数据块内的点是否都属于同一个聚类</strong></p><p>BWKM算法的核心目标之一是<strong>避免对每个数据点都进行K次距离计算</strong>（传统Lloyd算法需要）。它通过将数据空间划分为块(<code>Block</code>)，并利用块的整体几何属性质心信息，<strong>快速判断整个块内的点是否可能都属于同一个聚类</strong>。如果判断属于同一个聚类，那么该块内所有点都可以被整体分配给该聚类，无需再逐个点计算距离。这大大节省了计算量。</p><p><strong>定义解析：</strong></p><ol><li><p><strong>定义3：误分配函数 (ϵᴄ,ᴅ(B))</strong></p><ul><li><strong>输入:</strong><ul><li><code>C</code>: K个质心的集合。</li><li><code>D</code>: 数据集 (d维空间中的点)。</li><li><code>B</code>: 一个空间块 (比如一个矩形区域)。</li><li><code>P = B(D)</code>: 落在块<code>B</code>内的数据点的子集。如果<code>P</code>是空的(<code>∅</code>)，则误分配函数为0。</li></ul></li><li><strong>输出:</strong> <code>ϵᴄ,ᴅ(B)</code> - 一个非负实数，衡量块<code>B</code>内的点<em>可能</em>被错误分配到不同聚类的风险程度。</li><li><strong>计算公式:</strong><ul><li><code>ϵᴄ,ᴅ(B) = max{0, 2 * lʙ - δᴘ(C)}</code></li></ul></li><li><strong>公式组成:</strong><ul><li><code>lʙ</code>: 块<code>B</code><strong>对角线的长度</strong>。这代表了块<code>B</code>在空间中的<strong>最大可能跨度</strong>。块越大，<code>lʙ</code>越大。</li><li><code>δᴘ(C)</code>: <ul><li>设<code>P̄</code>是点集<code>P</code>的代表点（通常用<code>P</code>的质心，由加权Lloyd算法计算得出）。</li><li>设<code>cᴘ̄</code>是离<code>P̄</code><strong>最近</strong>的那个质心 (<code>cᴘ̄ ∈ C</code>)。</li><li><code>δᴘ(C) = min_{c ∈ C \ {cᴘ̄}} ||P̄ - c|| - ||P̄ - cᴘ̄||</code></li><li><strong>解释:</strong><ul><li><code>||P̄ - cᴘ̄||</code> 是代表点<code>P̄</code>到其最近质心<code>cᴘ̄</code>的距离。</li><li><code>min_{c ∈ C \ {cᴘ̄}} ||P̄ - c||</code> 是代表点<code>P̄</code>到<strong>除最近质心<code>cᴘ̄</code>外</strong>所有其他质心<code>c</code>中<strong>最小</strong>的距离（即到<strong>第二近质心</strong>的距离）。</li><li>所以，<code>δᴘ(C)</code> = (代表点<code>P̄</code>到第二近质心的距离) - (代表点<code>P̄</code>到最近质心的距离)。</li><li><strong>物理意义:</strong> <code>δᴘ(C)</code> <strong>衡量了最近质心<code>cᴘ̄</code>相对于其他质心对代表点<code>P̄</code>的“优势”有多大</strong>。<code>δᴘ(C)</code>越大，说明<code>cᴘ̄</code>比第二近的质心离<code>P̄</code>近很多，<code>P̄</code>属于<code>cᴘ̄</code>的确定性越高。</li></ul></li></ul></li></ul></li><li><strong><code>2 * lʙ - δᴘ(C)</code> 的含义:</strong><ul><li><code>2 * lʙ</code>: 这是块<code>B</code>内任意两点之间<strong>最大可能距离</strong>的上限（根据三角不等式，块内任意两点距离不会超过对角线长度<code>lʙ</code>，但乘以2提供了一个更宽松的、更容易计算的上界）。</li><li><code>δᴘ(C)</code>: 如上所述，是最近质心<code>cᴘ̄</code>对<code>P̄</code>的优势程度。</li><li><strong>整个项 <code>2 * lʙ - δᴘ(C)</code> 的含义:</strong> 想象块<code>B</code>内有一个点<code>x</code>，它可能离代表点<code>P̄</code>很远（最远可达<code>lʙ</code>量级）。如果块<code>B</code>非常大(<code>lʙ</code>很大)，或者<code>cᴘ̄</code>的优势很小(<code>δᴘ(C)</code>很小)，那么<code>x</code>离<code>P̄</code>的距离可能会抵消<code>cᴘ̄</code>相对于其他质心对<code>P̄</code>的优势，使得<code>x</code>有可能被分配到<code>cᴘ̄</code>以外的其他质心（比如第二近的质心）。<code>2 * lʙ - δᴘ(C)</code> 这个值<strong>量化了这种风险</strong>。</li></ul></li><li><strong><code>max{0, ...}</code> 的含义:</strong> 如果<code>2 * lʙ - δᴘ(C)</code>小于或等于0，说明即使考虑块内离<code>P̄</code>最远的点，<code>cᴘ̄</code>的优势仍然足够大，<strong>理论上可以保证</strong>块内所有点都应该分配给<code>cᴘ̄</code>。此时<code>ϵ=0</code>。如果<code>2 * lʙ - δᴘ(C) &gt; 0</code>，则存在<strong>风险</strong>，块内可能有点不属于<code>cᴘ̄</code>。风险越大，<code>ϵ</code>值越大。</li><li><strong>总结 <code>ϵᴄ,ᴅ(B)</code> 的作用:</strong> 它是一个<strong>风险指示器</strong>。<code>ϵ=0</code> 表示块<code>B</code>内所有点<strong>一定</strong>都属于同一个聚类（即<code>cᴘ̄</code>）。<code>ϵ&gt;0</code> 表示块<code>B</code>内<strong>可能</strong>有点属于不同的聚类，<code>ϵ</code>值越大，这种可能性越高（启发式规则）。</li></ul></li><li><p><strong>定理1：误分配函数为0的意义</strong></p><ul><li><strong>陈述:</strong> 如果对于一个非空的块<code>B</code>（包含点集<code>P</code>），计算出的误分配函数 <code>ϵᴄ,ᴅ(B) = 0</code>，那么<strong>块<code>B</code>内每一个点<code>x</code>的最近质心<code>cₓ</code>，都等于代表点<code>P̄</code>的最近质心<code>cᴘ̄</code></strong>。即：所有点<code>x ∈ P</code>都属于同一个聚类<code>cᴘ̄</code>。</li><li><strong>重要性:</strong> 这是BWKM算法高效性的<strong>理论基础</strong>。它证明了仅利用块<code>B</code>的几何信息(<code>lʙ</code>)、代表点<code>P̄</code>（由加权Lloyd提供）和质心<code>C</code>，通过计算<code>ϵ</code>，<strong>无需检查块内任何一个具体数据点<code>x</code>的距离</strong>，就能<strong>绝对确定</strong>整个块<code>B</code>内的点都属于同一个聚类<code>cᴘ̄</code>。这是算法能跳过大量距离计算的关键。</li></ul></li><li><p><strong>定义4：边界 (ℱᴄ,ᴅ(ℬ))</strong></p><ul><li><strong>输入:</strong><ul><li><code>D</code>: 数据集。</li><li><code>C</code>: 质心集合。</li><li><code>ℬ</code>: 一个空间划分（由许多块<code>B</code>组成）。</li></ul></li><li><strong>输出:</strong> <code>ℱᴄ,ᴅ(ℬ)</code> - 当前划分<code>ℬ</code>的<strong>边界</strong>。</li><li><strong>定义:</strong> 边界 <code>ℱᴄ,ᴅ(ℬ)</code> 是划分<code>ℬ</code>中所有满足 <code>ϵᴄ,ᴅ(B) &gt; 0</code> 的块<code>B</code>组成的子集。</li><li><strong>意义:</strong> 边界包含了所有<strong>可能没有被正确分配</strong>（即内部点可能属于不同聚类）的块。这些块是算法需要进一步关注和处理的对象。</li><li><strong>算法中的应用 (BWKM的核心策略):</strong> BWKM算法在运行过程中会维护一个空间划分<code>ℬ</code>。它<strong>只对边界块(<code>ℱᴄ,ᴅ(ℬ)</code>中的块)进行分割细化</strong>。如果一个块<code>B</code>的<code>ϵ=0</code>（不在边界上），那么它就被认为是“安全”的，其内部所有点都被整体分配给<code>cᴘ̄</code>，算法在后续迭代中不会再处理这个块内部（除非质心移动导致<code>ϵ</code>重新大于0）。这个策略<strong>极大地减少了需要细化和计算距离的块的数量</strong>，从而提高了效率。</li></ul></li></ol><p><strong>图1解释:</strong></p><p>图中展示了一个具体的块<code>B</code>（黑色边框矩形），内部有红蓝两色的点（属于两个不同的聚类，质心用蓝色星星表示）。代表点<code>P̄</code>是紫色菱形。</p><ul><li><strong>计算 <code>ϵᴄ,ᴅ(B)</code> 需要的信息 (图中所示):</strong><ul><li><code>||P̄ - cᴘ̄||</code>: 紫色菱形(<code>P̄</code>)到离它最近的蓝色星星(<code>cᴘ̄</code>)的距离（一条蓝色虚线）。</li><li><code>min_{c ∈ C \ {cᴘ̄}} ||P̄ - c||</code>: 紫色菱形(<code>P̄</code>)到另一个（第二近的）蓝色星星的距离（另一条蓝色虚线）。在这个例子中，<code>cᴘ̄</code>和这个第二近质心正好是那两个蓝色星星。</li><li><code>δᴘ(C) = min_{c ∈ C \ {cᴘ̄}} ||P̄ - c|| - ||P̄ - cᴘ̄||</code>: 两条蓝色虚线长度的差值。</li><li><code>lʙ</code>: 块<code>B</code>的紫色对角线长度（紫色虚线）。</li></ul></li><li><strong>为什么 <code>ϵ &gt; 0</code>?</strong> 块内实际包含了属于两个不同聚类的点（红点和蓝点）。代表点<code>P̄</code>可能靠近块中心或某个质心，但块的范围(<code>lʙ</code>)足够大，包含了靠近另一个质心的区域（图中右上角的红点离右边的蓝色星星更近）。计算出来的 <code>2 * lʙ</code> 大于 <code>δᴘ(C)</code>，导致 <code>ϵ = 2 * lʙ - δᴘ(C) &gt; 0</code>。这正确地反映了该块没有被“完好分配”（well assigned）的风险/事实，因此它会被包含在边界<code>ℱ</code>中，需要被进一步分割。</li></ul><p><strong>总结:</strong></p><ol><li><strong>误分配函数 <code>ϵ</code></strong>：是一个利用块几何大小(<code>lʙ</code>)、代表点(<code>P̄</code>)和质心(<code>C</code>)计算出来的值，用于评估块内点是否可能属于不同聚类。</li><li><strong>定理1</strong>：<code>ϵ=0</code> 是块内所有点必然属于同一聚类的<strong>充分条件</strong>。这允许算法安全地跳过这些块内部的距离计算。</li><li><strong>边界 <code>ℱ</code></strong>：是所有 <code>ϵ&gt;0</code> 的块的集合。这些块需要进一步处理（分割细化）。</li><li><strong>BWKM算法策略</strong>：在每次迭代中，只对当前划分的**边界块(<code>ℱ</code>)**进行分割细化，并对这些细化后的块计算<code>ϵ</code>。对于<code>ϵ=0</code>的块，将其内所有点整体分配给<code>cᴘ̄</code>；对于<code>ϵ&gt;0</code>的块，保留在边界中等待下次迭代可能继续分割。同时，质心会根据当前分配更新。这个过程不断重复，边界越来越细，直到满足停止条件（如边界为空、迭代次数、质心变化小等）。</li><li><strong>优势</strong>：通过避免对<code>ϵ=0</code>的“安全”块进行内部点级的距离计算和检查，以及只关注边界块进行细化，BWKM显著减少了k-means迭代中所需的距离计算次数，从而加速了计算，尤其适合处理大规模数据集。</li></ol><h3 id="reference" tabindex="-1">Reference <a class="header-anchor" href="#reference" aria-label="Permalink to &quot;Reference&quot;">​</a></h3><p>[1] <a href="https://arxiv.org/abs/1801.02949" target="_blank" rel="noreferrer">An efficient K-means clustering algorithm for massive data</a></p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/datawhalechina/easy-vecdb/edit/main/docs/more/chapter6/K-mean算法详解.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> 在 GitHub 上编辑此页<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>最后更新于: <time datetime="2025-12-29T09:05:33.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/easy-vecdb/more/chapter6/%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>两种聚类算法</span><!--]--></a></div><div class="pager" data-v-e257564d><!----></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>基于 Apache-2.0 许可发布</p><p class="copyright" data-v-e315a0ad><a href="https://beian.miit.gov.cn/" target="_blank">京ICP备2026002630号-1</a> | <a href="https://beian.mps.gov.cn/#/query/webSearch?code=11010602202215" rel="noreferrer" target="_blank">京公网安备11010602202215号</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"annoy_chapter1_annoy入门与环境搭建.md\":\"C86TB_kz\",\"annoy_chapter2_annoy核心api详解.md\":\"BdxKLN3m\",\"annoy_chapter3_annoy进阶技巧与最佳实践.md\":\"EADTfvty\",\"base_chapter1_学习路径推荐.md\":\"Daij0OP6\",\"base_chapter1_项目介绍.md\":\"igi-N8LW\",\"base_chapter2_为什么需要向量数据库.md\":\"DOOY35CH\",\"base_chapter3_向量嵌入算法基础.md\":\"BAVj6Rxq\",\"base_chapter4_向量搜索算法基础.md\":\"C2zPg0SL\",\"base_chapter5_annoy算法.md\":\"B7hd0TSm\",\"base_chapter5_ann搜索算法.md\":\"BVGDWXXe\",\"base_chapter5_hnsw算法.md\":\"BFcShGAu\",\"base_chapter5_ivf算法.md\":\"Z4APPMk4\",\"base_chapter5_lsh算法.md\":\"CEiBi1_C\",\"base_chapter5_pq算法.md\":\"D6LTdySi\",\"base_chapter6_实现你自己的向量数据库.md\":\"Bby1XfT-\",\"faiss_chapter1_faiss入门与环境搭建.md\":\"B1102qHm\",\"faiss_chapter2_faiss数据结构与索引.md\":\"wNHEvArG\",\"faiss_chapter3_faiss核心功能进阶.md\":\"CWHKzKDF\",\"faiss_chapter4_faiss性能调优与评估.md\":\"BESwZH_r\",\"faiss_chapter5_faiss工程化落地实战.md\":\"C-14T22S\",\"index.md\":\"DNVwDjEp\",\"milvus_chapter1_milvus向量数据库入门.md\":\"C6XYXgjy\",\"milvus_chapter2_milvus核心概念.md\":\"hKoqcOt6\",\"milvus_chapter3_pymilvus核心api实战.md\":\"8zR9WrqF\",\"milvus_chapter4_milvus的ai应用开发.md\":\"DgW_YVAK\",\"milvus_chapter5_milvus的ai应用开发.md\":\"OR-95EMj\",\"milvus_chapter6_milvus lite部署与应用.md\":\"JFtQ48mt\",\"milvus_chapter6_milvus reranker重排.md\":\"CFE_KuVK\",\"milvus_chapter6_milvus 存储优化.md\":\"is0KMx8t\",\"milvus_chapter6_milvus底层架构详解.md\":\"C9WAQVcm\",\"milvus_chapter6_mineru部署教程.md\":\"D5H6QSLi\",\"more_chapter1_gpu加速检索-基于fusionanns.md\":\"CfIev-Kt\",\"more_chapter2_meta-chunking：一种新的文本切分策略.md\":\"BS871zQ0\",\"more_chapter3_limit基于嵌入检索的理论极限.md\":\"8lcgKgwB\",\"more_chapter3_meta_limit_code_startup.md\":\"Cn416tJt\",\"more_chapter4_rabitq：用于近似最近邻搜索的带理论误差界的高维向量量化.md\":\"BTFBP4ot\",\"more_chapter5_向量.md\":\"2Fx0juom\",\"more_chapter6_k-mean算法详解.md\":\"BTJ9_1pl\",\"more_chapter6_聚类算法介绍.md\":\"BrVmwXc5\",\"more_milvus 数据切分总结.md\":\"Bgy33nqW\",\"projects_index.md\":\"0ENSoYyC\",\"projects_project1_readme.md\":\"DevbXIn7\",\"projects_project2_readme.md\":\"_QUWrFZ8\",\"projects_project3_readme.md\":\"CAmd7TaH\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"EasyVecDB 教程\",\"description\":\"向量数据库学习与实战指南\",\"base\":\"/easy-vecdb/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"returnToTopLabel\":\"返回顶部\",\"logo\":\"/favicon.ico\",\"outline\":{\"level\":[1,4]},\"nav\":[{\"text\":\"首页\",\"link\":\"/\"},{\"text\":\"向量基础\",\"link\":\"/base/chapter1/项目介绍\"},{\"text\":\"Annoy 教程\",\"link\":\"/Annoy/chapter1/Annoy入门与环境搭建\"},{\"text\":\"Faiss 教程\",\"link\":\"/Faiss/chapter1/FAISS入门与环境搭建\"},{\"text\":\"Milvus 教程\",\"link\":\"/Milvus/chapter1/Milvus向量数据库入门\"},{\"text\":\"补充内容\",\"link\":\"/more/chapter5/向量\"},{\"text\":\"实战项目\",\"link\":\"/projects/\"}],\"sidebar\":{\"/base/\":[{\"text\":\"Chapter 1 · 项目介绍\",\"items\":[{\"text\":\"项目介绍\",\"link\":\"/base/chapter1/项目介绍\"},{\"text\":\"学习路径推荐\",\"link\":\"/base/chapter1/学习路径推荐\"}]},{\"text\":\"Chapter 2 · 向量数据库概念\",\"items\":[{\"text\":\"为什么需要向量数据库\",\"link\":\"/base/chapter2/为什么需要向量数据库\"}]},{\"text\":\"Chapter 3 · 向量嵌入算法基础\",\"items\":[{\"text\":\"向量嵌入算法基础\",\"link\":\"/base/chapter3/向量嵌入算法基础\"}]},{\"text\":\"Chapter 4 · 向量搜索算法基础\",\"items\":[{\"text\":\"向量搜索算法基础\",\"link\":\"/base/chapter4/向量搜索算法基础\"}]},{\"text\":\"Chapter 5 · 向量ANN搜索算法\",\"items\":[{\"text\":\"ANN搜索算法\",\"link\":\"/base/chapter5/ANN搜索算法\"},{\"text\":\"Annoy算法\",\"link\":\"/base/chapter5/Annoy算法\"},{\"text\":\"IVF算法\",\"link\":\"/base/chapter5/IVF算法\"},{\"text\":\"HNSW算法\",\"link\":\"/base/chapter5/HNSW算法\"},{\"text\":\"PQ算法\",\"link\":\"/base/chapter5/PQ算法\"},{\"text\":\"LSH算法\",\"link\":\"/base/chapter5/LSH算法\"}]},{\"text\":\"Chapter 6 · 实现你自己的向量数据库\",\"items\":[{\"text\":\"实现你自己的向量数据库\",\"link\":\"/base/chapter6/实现你自己的向量数据库\"}]}],\"/Annoy/\":[{\"text\":\"Chapter 1 · Annoy入门与环境搭建\",\"items\":[{\"text\":\"Annoy入门与环境搭建\",\"link\":\"/Annoy/chapter1/Annoy入门与环境搭建\"}]},{\"text\":\"Chapter 2 · Annoy核心API详解\",\"items\":[{\"text\":\"Annoy核心API详解\",\"link\":\"/Annoy/chapter2/Annoy核心API详解\"}]},{\"text\":\"Chapter 3 · Annoy进阶技巧与最佳实践\",\"items\":[{\"text\":\"Annoy进阶技巧与最佳实践\",\"link\":\"/Annoy/chapter3/Annoy进阶技巧与最佳实践\"}]}],\"/Faiss/\":[{\"text\":\"Chapter 1 · FAISS入门与环境搭建\",\"items\":[{\"text\":\"FAISS 入门与环境搭建\",\"link\":\"/Faiss/chapter1/FAISS入门与环境搭建\"}]},{\"text\":\"Chapter 2 · FAISS数据结构与索引类型\",\"items\":[{\"text\":\"FAISS数据结构与索引类型\",\"link\":\"/Faiss/chapter2/FAISS数据结构与索引\"}]},{\"text\":\"Chapter 3 · FAISS核心功能进阶\",\"items\":[{\"text\":\"FAISS核心功能进阶\",\"link\":\"/Faiss/chapter3/FAISS核心功能进阶\"}]},{\"text\":\"Chapter 4 · FAISS性能调优与评估\",\"items\":[{\"text\":\"FAISS性能调优与评估\",\"link\":\"/Faiss/chapter4/FAISS性能调优与评估\"}]},{\"text\":\"Chapter 5 · FAISS工程化落地实战\",\"items\":[{\"text\":\"FAISS工程化落地实战\",\"link\":\"/Faiss/chapter5/FAISS工程化落地实战\"}]}],\"/Milvus/\":[{\"text\":\"Chapter 1 · Milvus向量数据库入门\",\"items\":[{\"text\":\"Milvus向量数据库入门\",\"link\":\"/Milvus/chapter1/Milvus向量数据库入门\"}]},{\"text\":\"Chapter 2 · Milvus核心概念\",\"items\":[{\"text\":\"Milvus核心概念\",\"link\":\"/Milvus/chapter2/Milvus核心概念\"}]},{\"text\":\"Chapter 3 · Milvus基础操作\",\"items\":[{\"text\":\"Milvus基础操作\",\"link\":\"/Milvus/chapter3/PyMilvus核心API实战\"}]},{\"text\":\"Chapter 4 · Milvus的AI应用开发\",\"items\":[{\"text\":\"综合实战:基于BM25的混合搜索向量数据库开发实战\",\"link\":\"/Milvus/chapter4/Milvus的AI应用开发\"}]},{\"text\":\"Chapter 5 · Milvus的AI应用开发\",\"items\":[{\"text\":\"综合实战:图像检索应用实战\",\"link\":\"/Milvus/chapter5/Milvus的AI应用开发\"}]},{\"text\":\"Chapter 6 · Milvus选学部分\",\"items\":[{\"text\":\"Milvus底层架构详解\",\"link\":\"/Milvus/chapter6/Milvus底层架构详解\"},{\"text\":\"Milvus Reranker\",\"link\":\"/Milvus/chapter6/Milvus Reranker重排\"},{\"text\":\"Milvus Lite部署教程\",\"link\":\"/Milvus/chapter6/Milvus Lite部署与应用\"},{\"text\":\"MinerU 部署教程\",\"link\":\"/Milvus/chapter5/MinerU部署教程\"}]}],\"/more/\":[{\"text\":\"Chapter 1 · FusionANNS\",\"items\":[{\"text\":\"FusionANNS架构设计\",\"link\":\"/more/chapter1/GPU加速检索-基于FusionANNS\"}]},{\"text\":\"Chapter 2 · Meta-Chunking\",\"items\":[{\"text\":\"全新的文本切分策略\",\"link\":\"/more/chapter2/Meta-Chunking：一种新的文本切分策略\"}]},{\"text\":\"Chapter 3 · Limit\",\"items\":[{\"text\":\"基于嵌入检索的理论极限\",\"link\":\"/more/chapter3/Limit基于嵌入检索的理论极限\"},{\"text\":\"实践操作\",\"link\":\"/more/chapter3/Meta_limit/code/startup\"}]},{\"text\":\"Chapter 4 · RabitQ\",\"items\":[{\"text\":\"RabitQ索引\",\"link\":\"/more/chapter4/RabitQ：用于近似最近邻搜索的带理论误差界的高维向量量化\"}]},{\"text\":\"Chapter 5 · 稀疏、稠密向量\",\"items\":[{\"text\":\"向量基础知识\",\"link\":\"/more/chapter5/向量\"}]},{\"text\":\"Chapter 6 · 聚类算法\",\"items\":[{\"text\":\"两种聚类算法\",\"link\":\"/more/chapter6/聚类算法介绍\"},{\"text\":\"K-means聚类详解\",\"link\":\"/more/chapter6/K-mean算法详解\"}]}],\"/projects/\":[{\"text\":\"实战项目1\",\"items\":[{\"text\":\"基于FAISS框架RAG实战项目\",\"link\":\"/projects/project1/README\"}]},{\"text\":\"实战项目2\",\"items\":[{\"text\":\"基于Milvus框架的Agent项目\",\"link\":\"/projects/project2/README\"}]},{\"text\":\"实战项目3\",\"items\":[{\"text\":\"基于Milvus和ArangoDB的RAG系统\",\"link\":\"/projects/project3/README\"}]},{\"text\":\"实战概览\",\"items\":[{\"text\":\"项目概览\",\"link\":\"/projects/\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/datawhalechina/easy-vecdb\"}],\"search\":{\"provider\":\"local\"},\"editLink\":{\"pattern\":\"https://github.com/datawhalechina/easy-vecdb/edit/main/docs/:path\",\"text\":\"在 GitHub 上编辑此页\"},\"lastUpdated\":{\"text\":\"最后更新于\",\"formatOptions\":{\"dateStyle\":\"short\",\"timeStyle\":\"medium\"}},\"footer\":{\"message\":\"基于 Apache-2.0 许可发布\",\"copyright\":\"<a href=\\\"https://beian.miit.gov.cn/\\\" target=\\\"_blank\\\">京ICP备2026002630号-1</a> | <a href=\\\"https://beian.mps.gov.cn/#/query/webSearch?code=11010602202215\\\" rel=\\\"noreferrer\\\" target=\\\"_blank\\\">京公网安备11010602202215号</a>\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>