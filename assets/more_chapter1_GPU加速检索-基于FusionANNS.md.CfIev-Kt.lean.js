import{_ as r}from"./chunks/hnsw.ByeghaTo.js";import{_ as o,o as e,c as i,ag as l,j as t,a as s}from"./chunks/framework.CzE6cJJL.js";const p="/easy-vecdb/images/x1.png",n="/easy-vecdb/images/x11.png",d="/easy-vecdb/images/PQ.jpg",h="/easy-vecdb/images/pq1.png",m="/easy-vecdb/images/codebook1.png",g="/easy-vecdb/images/%E6%AC%A7%E6%B0%8F%E8%B7%9D%E7%A6%BB.png",k="/easy-vecdb/images/8.png",c="/easy-vecdb/images/%E5%8E%8B%E7%BC%A9.png",u="/easy-vecdb/images/%E8%B7%9D%E7%A6%BB%E8%A1%A8.png",T="/easy-vecdb/images/x12.png",H="/easy-vecdb/images/1.png",x="/easy-vecdb/images/%E7%BB%84.png",b="/easy-vecdb/images/6.png",y="/easy-vecdb/images/%E5%AD%98%E5%82%A82.png",w="/easy-vecdb/images/%E5%AD%98%E5%82%A8%E5%B8%83%E5%B1%80.png",V="/easy-vecdb/images/x13.png",f="/easy-vecdb/images/ssd.png",Q="/easy-vecdb/images/postingList.png",E="/easy-vecdb/images/graph.png",M="/easy-vecdb/images/22.png",v="/easy-vecdb/images/25.png",_="/easy-vecdb/images/24.png",L="/easy-vecdb/images/16.png",D="/easy-vecdb/images/17.png",P="/easy-vecdb/images/18.png",S="/easy-vecdb/images/20.png",C="/easy-vecdb/images/x14.png",V1=JSON.parse('{"title":"向量数据的存储优化与GPU加速检索","description":"","frontmatter":{},"headers":[],"relativePath":"more/chapter1/GPU加速检索-基于FusionANNS.md","filePath":"more/chapter1/GPU加速检索-基于FusionANNS.md","lastUpdated":1766999133000}'),Z={name:"more/chapter1/GPU加速检索-基于FusionANNS.md"},A={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},F={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.097ex",height:"1.027ex",role:"img",focusable:"false",viewBox:"0 -443 485 454","aria-hidden":"true"},N={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},I={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.357ex",height:"1.952ex",role:"img",focusable:"false",viewBox:"0 -705 1042 862.8","aria-hidden":"true"},q={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},U={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"33.306ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 14721.3 1000","aria-hidden":"true"},B={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},G={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.339ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.605ex",height:"1.934ex",role:"img",focusable:"false",viewBox:"0 -705 1151.6 855","aria-hidden":"true"},j={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},O={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.097ex",height:"1.027ex",role:"img",focusable:"false",viewBox:"0 -443 485 454","aria-hidden":"true"},R={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.919ex",height:"1ex",role:"img",focusable:"false",viewBox:"0 -431 406 442","aria-hidden":"true"},J={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},$={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.097ex",height:"1.027ex",role:"img",focusable:"false",viewBox:"0 -443 485 454","aria-hidden":"true"},X={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},Y={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.357ex",height:"1.952ex",role:"img",focusable:"false",viewBox:"0 -705 1042 862.8","aria-hidden":"true"},K={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},W={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.149ex"},xmlns:"http://www.w3.org/2000/svg",width:"46.744ex",height:"5.43ex",role:"img",focusable:"false",viewBox:"0 -1450 20660.7 2400","aria-hidden":"true"},t1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},a1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.777ex"},xmlns:"http://www.w3.org/2000/svg",width:"42.759ex",height:"2.922ex",role:"img",focusable:"false",viewBox:"0 -948 18899.4 1291.3","aria-hidden":"true"},s1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},e1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"43.987ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 19442.3 1000","aria-hidden":"true"},i1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},l1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.097ex",height:"1.027ex",role:"img",focusable:"false",viewBox:"0 -443 485 454","aria-hidden":"true"},n1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},T1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.357ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.357ex",height:"1.952ex",role:"img",focusable:"false",viewBox:"0 -705 1042 862.8","aria-hidden":"true"},Q1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},r1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"0.781ex",height:"1.52ex",role:"img",focusable:"false",viewBox:"0 -661 345 672","aria-hidden":"true"},o1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},p1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.339ex"},xmlns:"http://www.w3.org/2000/svg",width:"2.605ex",height:"1.934ex",role:"img",focusable:"false",viewBox:"0 -705 1151.6 855","aria-hidden":"true"},d1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},h1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.025ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.097ex",height:"1.027ex",role:"img",focusable:"false",viewBox:"0 -443 485 454","aria-hidden":"true"},m1={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g1={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.05ex"},xmlns:"http://www.w3.org/2000/svg",width:"1.054ex",height:"1.072ex",role:"img",focusable:"false",viewBox:"0 -452 466 474","aria-hidden":"true"};function k1(c1,a,u1,H1,x1,b1){return e(),i("div",null,[a[54]||(a[54]=l("",30)),t("p",null,[a[16]||(a[16]=s("首先是数据分组，用分层聚类算法（比如 k-means）把所有向量分成多个 “小组”（posting lists），每个小组有一个 “中心点”（centroid）。针对边界向量（同时靠近多个聚类中心的向量），采用复制机制分配：若向量 ",-1)),t("mjx-container",A,[(e(),i("svg",F,[...a[0]||(a[0]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D463",d:"M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z",style:{"stroke-width":"3"}})])])],-1)])])),a[1]||(a[1]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"v")])],-1))]),a[17]||(a[17]=s(" 到聚类 ",-1)),t("mjx-container",N,[(e(),i("svg",I,[...a[2]||(a[2]=[l("",1)])])),a[3]||(a[3]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"C"),t("mi",null,"i")])])],-1))]),a[18]||(a[18]=s(" 的距离满足 ",-1)),t("mjx-container",q,[(e(),i("svg",U,[...a[4]||(a[4]=[l("",1)])])),a[5]||(a[5]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mtext",null,"Dist"),t("mo",{stretchy:"false"},"("),t("mi",null,"v"),t("mo",null,","),t("msub",null,[t("mi",null,"C"),t("mi",null,"i")]),t("mo",{stretchy:"false"},")"),t("mo",null,"≤"),t("mo",{stretchy:"false"},"("),t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ϵ"),t("mo",{stretchy:"false"},")"),t("mo",null,"×"),t("mtext",null,"Dist"),t("mo",{stretchy:"false"},"("),t("mi",null,"v"),t("mo",null,","),t("msub",null,[t("mi",null,"C"),t("mn",null,"1")]),t("mo",{stretchy:"false"},")")])],-1))]),a[19]||(a[19]=s("（其中 ",-1)),t("mjx-container",B,[(e(),i("svg",G,[...a[6]||(a[6]=[l("",1)])])),a[7]||(a[7]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"C"),t("mn",null,"1")])])],-1))]),a[20]||(a[20]=s(" 是离 ",-1)),t("mjx-container",j,[(e(),i("svg",O,[...a[8]||(a[8]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D463",d:"M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z",style:{"stroke-width":"3"}})])])],-1)])])),a[9]||(a[9]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"v")])],-1))]),a[21]||(a[21]=s(" 最近的聚类，",-1)),t("mjx-container",R,[(e(),i("svg",z,[...a[10]||(a[10]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D716",d:"M227 -11Q149 -11 95 41T40 174Q40 262 87 322Q121 367 173 396T287 430Q289 431 329 431H367Q382 426 382 411Q382 385 341 385H325H312Q191 385 154 277L150 265H327Q340 256 340 246Q340 228 320 219H138V217Q128 187 128 143Q128 77 160 52T231 26Q258 26 284 36T326 57T343 68Q350 68 354 58T358 39Q358 36 357 35Q354 31 337 21T289 0T227 -11Z",style:{"stroke-width":"3"}})])])],-1)])])),a[11]||(a[11]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"ϵ")])],-1))]),a[22]||(a[22]=s(" 为距离阈值），则 ",-1)),t("mjx-container",J,[(e(),i("svg",$,[...a[12]||(a[12]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D463",d:"M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z",style:{"stroke-width":"3"}})])])],-1)])])),a[13]||(a[13]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"v")])],-1))]),a[23]||(a[23]=s(" 会被分配到 ",-1)),t("mjx-container",X,[(e(),i("svg",Y,[...a[14]||(a[14]=[l("",1)])])),a[15]||(a[15]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"C"),t("mi",null,"i")])])],-1))]),a[24]||(a[24]=s(" 中；为平衡精度与效率，每个向量最多分配到 8 个聚类。回到离线层图中，你可以看到，基于所有PostingList的centerId，采用SPTAG算法构建导航图，存储到内存中，构建时，每个新加入的质心会与最近的64个质心建立边（你可以自定义边的数量，可以为64，不够开销会变大），同时限制每个节点的最大边数，提取每个发布列表的向量ID作为元数据，注意，这里是向量的ID，不是向量的值。与导航图共同存储到内存中，此时，之前构建的发布列表就可以丢弃了，我们在cpu内存里面只保存图，而这个图里面只有id，没有值，这样就可以大幅度降低内存占用。",-1))]),a[55]||(a[55]=l("",51)),t("p",null,[t("mjx-container",K,[(e(),i("svg",W,[...a[25]||(a[25]=[l("",1)])])),a[26]||(a[26]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mtext",null,"DistanceTable"),t("mo",{stretchy:"false"},"["),t("mi",null,"i"),t("mo",{stretchy:"false"},"]"),t("mo",{stretchy:"false"},"["),t("mi",null,"j"),t("mo",{stretchy:"false"},"]"),t("mo",null,"="),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msub",null,[t("mi",null,"q"),t("mi",null,"i")]),t("mo",null,"−"),t("msub",null,[t("mi",null,"C"),t("mi",null,"i")]),t("mo",{stretchy:"false"},"["),t("mi",null,"j"),t("mo",{stretchy:"false"},"]"),t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("msup",null,[t("mo",{"data-mjx-texclass":"ORD",stretchy:"false"},"|"),t("mn",null,"2")]),t("mstyle",{scriptlevel:"0"},[t("mspace",{width:"1em"})]),t("mtable",{columnspacing:"1em",rowspacing:"4pt"},[t("mtr",null,[t("mtd",null,[t("mi",null,"i"),t("mo",null,"∈"),t("mo",{stretchy:"false"},"["),t("mn",null,"0"),t("mo",null,","),t("mn",null,"7"),t("mo",{stretchy:"false"},"]")])]),t("mtr",null,[t("mtd",null,[t("mi",null,"j"),t("mo",null,"∈"),t("mo",{stretchy:"false"},"["),t("mn",null,"0"),t("mo",null,","),t("mn",null,"255"),t("mo",{stretchy:"false"},"]")])])])])],-1))]),a[29]||(a[29]=s(" 然后，根据量化编码快速计算近似距离： ",-1)),t("mjx-container",t1,[(e(),i("svg",a1,[...a[27]||(a[27]=[l("",1)])])),a[28]||(a[28]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mtext",null,"Dist"),t("mo",{stretchy:"false"},"("),t("mi",null,"Q"),t("mo",null,","),t("mi",null,"X"),t("mo",{stretchy:"false"},")"),t("mo",null,"≈"),t("munderover",null,[t("mo",{"data-mjx-texclass":"OP"},"∑"),t("mrow",{"data-mjx-texclass":"ORD"},[t("mi",null,"k"),t("mo",null,"="),t("mn",null,"1")]),t("mrow",{"data-mjx-texclass":"ORD"},[t("mn",null,"8")])]),t("mtext",null,"DistanceTable"),t("mo",{stretchy:"false"},"["),t("mi",null,"k"),t("mo",{stretchy:"false"},"]"),t("mo",{stretchy:"false"},"["),t("msub",null,[t("mtext",null,"code"),t("mi",null,"k")]),t("mo",{stretchy:"false"},"]")])],-1))]),a[30]||(a[30]=s(" 为进一步提升计算效率，系统采用 2048 线程并行计算（8 子空间 ×256 中心），在 V100 GPU 上，每个查询的计算耗时仅为0.0046ms，极大地加快了查询响应速度。 如果不太理解，我们可以假设有一个query，对其进行PQ量化，得到PQ量化后的向量表示:",-1))]),a[56]||(a[56]=l("",21)),t("p",null,[a[45]||(a[45]=t("img",{src:H,alt:"pic"},null,-1)),a[46]||(a[46]=s(" FusionANNS 首先利用分层平衡聚类算法（如 k-means）对十亿级向量数据集进行迭代划分。系统将 10 亿向量依次进行 H1、H2、H3、H4 层聚类，以 H1 层为例，会聚类成 2 个质心，H2 层有 3 个质心，H3 层 5 个质心，H4 层 8 个质心，最终形成多个 Posting List，每个 Posting List 包含多个向量 ID 及其对应的向量内容。在聚类过程中，为提升聚类质量，采用复制机制处理边界向量。当向量位于多个聚类边界时，依据公式 ",-1)),t("mjx-container",s1,[(e(),i("svg",e1,[...a[31]||(a[31]=[l("",1)])])),a[32]||(a[32]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"v"),t("mo",null,"∈"),t("msub",null,[t("mi",null,"C"),t("mi",null,"i")]),t("mo",{stretchy:"false"},"⇔"),t("mi",null,"D"),t("mi",null,"i"),t("mi",null,"s"),t("mi",null,"t"),t("mo",{stretchy:"false"},"("),t("mi",null,"v"),t("mo",null,","),t("msub",null,[t("mi",null,"C"),t("mi",null,"i")]),t("mo",{stretchy:"false"},")"),t("mo",null,"≤"),t("mo",{stretchy:"false"},"("),t("mn",null,"1"),t("mo",null,"+"),t("mi",null,"ε"),t("mo",{stretchy:"false"},")"),t("mo",null,"×"),t("mi",null,"D"),t("mi",null,"i"),t("mi",null,"s"),t("mi",null,"t"),t("mo",{stretchy:"false"},"("),t("mi",null,"v"),t("mo",null,","),t("msub",null,[t("mi",null,"C"),t("mn",null,"1")]),t("mo",{stretchy:"false"},")")])],-1))]),a[47]||(a[47]=s("（其中 ",-1)),t("mjx-container",i1,[(e(),i("svg",l1,[...a[33]||(a[33]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D463",d:"M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z",style:{"stroke-width":"3"}})])])],-1)])])),a[34]||(a[34]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"v")])],-1))]),a[48]||(a[48]=s(" 代表待分配向量，",-1)),t("mjx-container",n1,[(e(),i("svg",T1,[...a[35]||(a[35]=[l("",1)])])),a[36]||(a[36]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"C"),t("mi",null,"i")])])],-1))]),a[49]||(a[49]=s(" 表示第 ",-1)),t("mjx-container",Q1,[(e(),i("svg",r1,[...a[37]||(a[37]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])],-1)])])),a[38]||(a[38]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"i")])],-1))]),a[50]||(a[50]=s(" 个聚类，",-1)),t("mjx-container",o1,[(e(),i("svg",p1,[...a[39]||(a[39]=[l("",1)])])),a[40]||(a[40]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("msub",null,[t("mi",null,"C"),t("mn",null,"1")])])],-1))]),a[51]||(a[51]=s(" 是距离 ",-1)),t("mjx-container",d1,[(e(),i("svg",h1,[...a[41]||(a[41]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D463",d:"M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z",style:{"stroke-width":"3"}})])])],-1)])])),a[42]||(a[42]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"v")])],-1))]),a[52]||(a[52]=s(" 最近的聚类，",-1)),t("mjx-container",m1,[(e(),i("svg",g1,[...a[43]||(a[43]=[t("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[t("g",{"data-mml-node":"math"},[t("g",{"data-mml-node":"mi"},[t("path",{"data-c":"1D700",d:"M190 -22Q124 -22 76 11T27 107Q27 174 97 232L107 239L99 248Q76 273 76 304Q76 364 144 408T290 452H302Q360 452 405 421Q428 405 428 392Q428 381 417 369T391 356Q382 356 371 365T338 383T283 392Q217 392 167 368T116 308Q116 289 133 272Q142 263 145 262T157 264Q188 278 238 278H243Q308 278 308 247Q308 206 223 206Q177 206 142 219L132 212Q68 169 68 112Q68 39 201 39Q253 39 286 49T328 72T345 94T362 105Q376 103 376 88Q376 79 365 62T334 26T275 -8T190 -22Z",style:{"stroke-width":"3"}})])])],-1)])])),a[44]||(a[44]=t("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[t("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[t("mi",null,"ε")])],-1))]),a[53]||(a[53]=s(" 用于平衡查询精度和效率），将边界向量分配到多个相关聚类中，每个向量最多分配到 8 个聚类。通过这种分层聚类方式，有效组织数据，缩小搜索空间。",-1))]),a[57]||(a[57]=l("",101))])}const f1=o(Z,[["render",k1]]);export{V1 as __pageData,f1 as default};
