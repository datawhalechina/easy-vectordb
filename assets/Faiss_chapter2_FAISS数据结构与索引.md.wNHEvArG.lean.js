import{_ as t,o as n,c as l,ag as a,j as s,a as p}from"./chunks/framework.CzE6cJJL.js";const D=JSON.parse('{"title":"Chapter 2：FAISS数据结构与索引类型","description":"","frontmatter":{},"headers":[],"relativePath":"Faiss/chapter2/FAISS数据结构与索引.md","filePath":"Faiss/chapter2/FAISS数据结构与索引.md","lastUpdated":1768535534000}'),h={name:"Faiss/chapter2/FAISS数据结构与索引.md"},e={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},k={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-3.453ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.414ex",height:"8.281ex",role:"img",focusable:"false",viewBox:"0 -2133.6 10791.1 3660","aria-hidden":"true"},r={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},d={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"14.58ex",height:"6.354ex",role:"img",focusable:"false",viewBox:"0 -1562.5 6444.6 2808.5","aria-hidden":"true"},E={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"16.92ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 7478.7 1000","aria-hidden":"true"},y={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},c={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-4.118ex"},xmlns:"http://www.w3.org/2000/svg",width:"33.104ex",height:"7.722ex",role:"img",focusable:"false",viewBox:"0 -1592.9 14631.9 3412.9","aria-hidden":"true"},F={tabindex:"0",class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},b={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.172ex"},xmlns:"http://www.w3.org/2000/svg",width:"42.148ex",height:"5.398ex",role:"img",focusable:"false",viewBox:"0 -1426 18629.6 2386","aria-hidden":"true"};function m(o,i,u,Q,T,C){return n(),l("div",null,[i[10]||(i[10]=a("",9)),s("mjx-container",e,[(n(),l("svg",k,[...i[0]||(i[0]=[a("",1)])])),i[1]||(i[1]=s("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"x"),s("mo",null,","),s("mi",null,"y"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("msqrt",null,[s("munderover",null,[s("mo",{"data-mjx-texclass":"OP"},"∑"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"i"),s("mo",null,"="),s("mn",null,"1")]),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"n")])]),s("mo",{stretchy:"false"},"("),s("msub",null,[s("mi",null,"x"),s("mi",null,"i")]),s("mo",null,"−"),s("msub",null,[s("mi",null,"y"),s("mi",null,"i")]),s("msup",null,[s("mo",{stretchy:"false"},")"),s("mn",null,"2")])])])],-1))]),i[11]||(i[11]=s("p",null,"适用于需要衡量向量空间中物理距离的场景，如计算机视觉中的图像特征匹配。",-1)),i[12]||(i[12]=s("p",null,[s("strong",null,"IndexFlatIP：基于内积（Inner Product）度量")],-1)),i[13]||(i[13]=s("p",null,"内积为两个向量对应维度的乘积和，公式为：",-1)),s("mjx-container",r,[(n(),l("svg",d,[...i[2]||(i[2]=[a("",1)])])),i[3]||(i[3]=s("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("mi",null,"x"),s("mo",null,"⋅"),s("mi",null,"y"),s("mo",null,"="),s("munderover",null,[s("mo",{"data-mjx-texclass":"OP"},"∑"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"i"),s("mo",null,"="),s("mn",null,"1")]),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"n")])]),s("msub",null,[s("mi",null,"x"),s("mi",null,"i")]),s("msub",null,[s("mi",null,"y"),s("mi",null,"i")])])],-1))]),i[14]||(i[14]=s("p",null,[p("在 FAISS 中，"),s("strong",null,"内积被用作相似度而非距离"),p("。由于检索排序默认按“距离升序”，FAISS 实际使用 "),s("strong",null,"负内积作为距离"),p("：")],-1)),s("mjx-container",E,[(n(),l("svg",g,[...i[4]||(i[4]=[a("",1)])])),i[5]||(i[5]=s("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("mi",null,"d"),s("mo",{stretchy:"false"},"("),s("mi",null,"x"),s("mo",null,","),s("mi",null,"y"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mo",null,"−"),s("mo",{stretchy:"false"},"("),s("mi",null,"x"),s("mo",null,"⋅"),s("mi",null,"y"),s("mo",{stretchy:"false"},")")])],-1))]),i[15]||(i[15]=s("p",null,[p("因此，IndexFlatIP 返回的是 "),s("strong",null,"内积最大的向量"),p("。"),s("br"),p(" 适用于向量已归一化或本身表示相似度空间的场景，如推荐系统中的用户-物品向量匹配。")],-1)),i[16]||(i[16]=s("p",null,[s("strong",null,"IndexFlatCOSINE：基于余弦相似度（Cosine Similarity）度量")],-1)),i[17]||(i[17]=s("p",null,"余弦相似度定义为：",-1)),s("mjx-container",y,[(n(),l("svg",c,[...i[6]||(i[6]=[a("",1)])])),i[7]||(i[7]=s("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"m"),s("mo",{stretchy:"false"},"("),s("mi",null,"x"),s("mo",null,","),s("mi",null,"y"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("munderover",null,[s("mo",{"data-mjx-texclass":"OP"},"∑"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"i"),s("mo",null,"="),s("mn",null,"1")]),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"n")])]),s("msub",null,[s("mi",null,"x"),s("mi",null,"i")]),s("msub",null,[s("mi",null,"y"),s("mi",null,"i")])]),s("mrow",null,[s("msqrt",null,[s("munderover",null,[s("mo",{"data-mjx-texclass":"OP"},"∑"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"i"),s("mo",null,"="),s("mn",null,"1")]),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"n")])]),s("msubsup",null,[s("mi",null,"x"),s("mi",null,"i"),s("mn",null,"2")])]),s("msqrt",null,[s("munderover",null,[s("mo",{"data-mjx-texclass":"OP"},"∑"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"i"),s("mo",null,"="),s("mn",null,"1")]),s("mrow",{"data-mjx-texclass":"ORD"},[s("mi",null,"n")])]),s("msubsup",null,[s("mi",null,"y"),s("mi",null,"i"),s("mn",null,"2")])])])])])],-1))]),i[18]||(i[18]=a("",137)),s("mjx-container",F,[(n(),l("svg",b,[...i[8]||(i[8]=[a("",1)])])),i[9]||(i[9]=s("mjx-assistive-mml",{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("mi",{mathvariant:"normal"},"压"),s("mi",{mathvariant:"normal"},"缩"),s("mi",{mathvariant:"normal"},"率"),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"原"),s("mi",{mathvariant:"normal"},"始"),s("mi",{mathvariant:"normal"},"向"),s("mi",{mathvariant:"normal"},"量"),s("mi",{mathvariant:"normal"},"大"),s("mi",{mathvariant:"normal"},"小")]),s("mrow",null,[s("mi",null,"P"),s("mi",null,"Q"),s("mi",{mathvariant:"normal"},"编"),s("mi",{mathvariant:"normal"},"码"),s("mi",{mathvariant:"normal"},"大"),s("mi",{mathvariant:"normal"},"小")])]),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mi",null,"d"),s("mo",null,"×"),s("mn",null,"4")]),s("mrow",null,[s("mi",null,"m"),s("mo",null,"×"),s("mo",{stretchy:"false"},"("),s("mi",null,"n"),s("mi",null,"b"),s("mi",null,"i"),s("mi",null,"t"),s("mi",null,"s"),s("mrow",{"data-mjx-texclass":"ORD"},[s("mo",null,"/")]),s("mn",null,"8"),s("mo",{stretchy:"false"},")")])])])],-1))]),i[19]||(i[19]=a("",93))])}const _=t(h,[["render",m]]);export{D as __pageData,_ as default};
