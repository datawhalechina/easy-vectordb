# ANNæœç´¢ç®—æ³•

èªæ˜çš„ä½ å·²ç»çŸ¥é“æš´åŠ›æœç´¢æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼šå½“ä½ è¦æœç´¢ä¸€ä¸ªå‘é‡æ—¶ï¼Œå®ƒä¼šè®¡ç®—è¿™ä¸ªæŸ¥è¯¢å‘é‡ä¸æ•°æ®åº“ä¸­æ‰€æœ‰å…¶ä»–å‘é‡çš„ç›¸ä¼¼åº¦ï¼ˆå¦‚æ¬§æ°è·ç¦»æˆ–ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ï¼Œç„¶åæ’åºè¿”å›æœ€ç›¸ä¼¼çš„å‰Kä¸ªç»“æœ.è¿™ç§æ–¹æ³•çš„â€‹â€‹ä¼˜åŠ¿åœ¨äºç»“æœçš„ç»å¯¹å‡†ç¡®æ€§â€‹â€‹ï¼Œå› ä¸ºå®ƒæ¯”è¾ƒäº†æ‰€æœ‰å¯èƒ½æ€§ã€‚ä½†è¿™ä¹Ÿæ˜¯å…¶æœ€å¤§çš„åŠ£åŠ¿ï¼Œå› ä¸ºâ€‹â€‹è®¡ç®—æˆæœ¬ä¸æ•°æ®é‡æˆæ­£æ¯”â€‹â€‹ï¼ˆO(N)å¤æ‚åº¦ï¼‰
ã€‚å½“æ•°æ®é‡ä»å‡ åƒå¢é•¿åˆ°ç™¾ä¸‡ã€åƒä¸‡ç”šè‡³äº¿çº§æ—¶ï¼Œä¸€æ¬¡æŸ¥è¯¢çš„è€—æ—¶å¯èƒ½ä»æ¯«ç§’çº§å¢åŠ åˆ°åˆ†é’Ÿã€å°æ—¶ç”šè‡³æ— æ³•æ¥å—ï¼Œæ— æ³•æ»¡è¶³å®æ—¶åº”ç”¨çš„éœ€æ±‚ã€‚æ­¤å¤–ï¼Œåœ¨é«˜ç»´ç©ºé—´ä¸­ï¼Œæ‰€æœ‰ç‚¹å¯¹ä¹‹é—´çš„è·ç¦»ä¼šå˜å¾—éå¸¸æ¥è¿‘ï¼Œè¿™ä½¿å¾—åŒºåˆ†çœŸæ­£è¿‘é‚»çš„éš¾åº¦å¢åŠ ï¼Œæš´åŠ›æœç´¢çš„æ•ˆç‡ä¼šè¿›ä¸€æ­¥é™ä½ï¼Œè¿™ä¸€ç°è±¡è¢«ç§°ä¸ºâ€œç»´åº¦ç¾éš¾â€ã€‚å…·ä½“ç»´åº¦ç¾éš¾æ˜¯æ€ä¹ˆå½±å“å‘é‡æœç´¢ï¼Œå¯ä»¥è¯¦ç»†æŸ¥çœ‹ã€å‘é‡æœç´¢ç®—æ³•åŸºç¡€ã€‘è¿™ä¸€ç« èŠ‚ã€‚

**ä»€ä¹ˆæ˜¯ANNæœç´¢ï¼Ÿ**
ANNï¼ˆApproximate Nearest Neighborsï¼‰æœç´¢æ˜¯ä¸€ç§ç”¨äºåœ¨é«˜ç»´ç©ºé—´ä¸­å¿«é€ŸæŸ¥æ‰¾æœ€è¿‘é‚»çš„ç®—æ³•ã€‚ä¸æš´åŠ›æœç´¢ä¸åŒï¼ŒANNæœç´¢é€šè¿‡å¼•å…¥è¿‘ä¼¼è®¡ç®—ï¼Œåœ¨ä¿æŒè¾ƒé«˜å¬å›ç‡çš„åŒæ—¶ï¼Œæ˜¾è‘—å‡å°‘äº†è®¡ç®—å¤æ‚åº¦ã€‚ANNçš„æ ¸å¿ƒä»·å€¼åœ¨äºè§£å†³äº†"ç»´åº¦ç¾éš¾"é—®é¢˜â€”â€”å½“æ•°æ®ç»´åº¦å’Œæ•°é‡å¢åŠ æ—¶ï¼Œæš´åŠ›æœç´¢çš„è®¡ç®—å¤æ‚åº¦å‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œè€ŒANNé€šè¿‡å·§å¦™çš„è¿‘ä¼¼æ–¹æ³•ç»´æŒäº†å¯æ¥å—çš„æœç´¢æ€§èƒ½ã€‚

ANNç®—æ³•ä¹‹æ‰€ä»¥å¿…è¦ï¼Œæ­£æ˜¯ä¸ºäº†æ‰“ç ´æš´åŠ›æœç´¢åœ¨æ•ˆç‡ä¸Šçš„ç“¶é¢ˆã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šâ€‹â€‹ç‰ºç‰²å¾®ä¸è¶³é“çš„ç²¾åº¦ï¼Œæ¢å–æ•°ç™¾å€ç”šè‡³æ•°åƒå€çš„é€Ÿåº¦æå‡â€‹â€‹ã€‚è¿™å¹¶ä¸æ˜¯éšæ„çš„å¦¥åï¼Œè€Œæ˜¯é€šè¿‡æ™ºèƒ½çš„ç´¢å¼•ç­–ç•¥å®ç°çš„ã€‚

## 1.ç´¢å¼•ç±»å‹

åœ¨å‘é‡æœç´¢ï¼ˆVector Searchï¼‰ä¸­ï¼Œç´¢å¼•ï¼ˆIndexï¼‰æ˜¯åŠ é€Ÿç›¸ä¼¼åº¦æ£€ç´¢çš„å…³é”®ç»“æ„ã€‚
æ ¹æ®æ ¸å¿ƒæ€æƒ³ä¸æ•°æ®ç»„ç»‡æ–¹å¼ï¼Œå‘é‡ç´¢å¼•å¤§ä½“å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ å¤§ç±»ğŸ‘‡

### 1.1ç©ºé—´åˆ’åˆ†ç±»ï¼ˆSpatial Partitioningï¼‰

é€šè¿‡åˆ’åˆ†å‘é‡ç©ºé—´æ¥å‡å°‘æœç´¢èŒƒå›´ã€‚
ä»£è¡¨ç®—æ³•ï¼š

- IVFï¼ˆInverted File Indexï¼‰ï¼šä½¿ç”¨ K-Means å°†å‘é‡èšæˆå¤šä¸ªç°‡ï¼ˆClusterï¼‰ï¼Œæœç´¢æ—¶åªåœ¨æœ€ç›¸è¿‘çš„å‡ ä¸ªç°‡å†…æŸ¥æ‰¾ã€‚
- K-D Tree / Ball Treeï¼šä»¥æ ‘ç»“æ„é€’å½’åˆ’åˆ†ç©ºé—´ï¼Œé€‚åˆä½ç»´å‘é‡ã€‚
- Annoyï¼ˆApproximate Nearest Neighbors Oh Yeahï¼‰ï¼šåŸºäºå¤šæ£µéšæœºæŠ•å½±æ ‘ï¼ˆRandom Projection Treeï¼‰ï¼Œåœ¨ç£ç›˜ä¸Šé«˜æ•ˆå­˜å‚¨ï¼Œé€‚åˆé™æ€æ•°æ®ã€‚

> ğŸ“Œ ç‰¹ç‚¹ï¼šç²—ç­›æ•ˆæœå¥½ï¼Œé€Ÿåº¦å¿«ï¼Œä½†åœ¨é«˜ç»´ç©ºé—´æ€§èƒ½ä¸‹é™æ˜æ˜¾ã€‚

### 1.2å›¾ç´¢å¼•ç±»ï¼ˆGraph-based Indexï¼‰

é€šè¿‡æ„å»º**å‘é‡ä¹‹é—´çš„é‚»æ¥å›¾ï¼ˆè¿‘é‚»å…³ç³»ï¼‰**æ¥å®ç°é«˜æ•ˆå¯¼èˆªæœç´¢ã€‚
ä»£è¡¨ç®—æ³•ï¼š

- HNSWï¼ˆHierarchical Navigable Small Worldï¼‰ï¼šåˆ†å±‚å°ä¸–ç•Œå›¾ç»“æ„ï¼Œæœç´¢ä»ç¨€ç–å±‚å‘å¯†é›†å±‚é€æ­¥ç»†åŒ–ã€‚
- NSGï¼ˆNavigating Spreading-out Graphï¼‰ï¼šé€šè¿‡ä¼˜åŒ–è¾¹è¿æ¥å‡å°‘å›¾å¤æ‚åº¦ï¼Œå¸¸ç”¨äºå·¥ä¸šå¤§è§„æ¨¡æ£€ç´¢ã€‚
- NN-Descentï¼šé€šè¿‡â€œè¿‘é‚»ä¼ æ’­â€é€æ­¥é€¼è¿‘KNNå›¾ï¼Œå¸¸ç”¨äºHNSWæˆ–NSGçš„é¢„æ„å»ºé˜¶æ®µã€‚

> ğŸ“Œ ç‰¹ç‚¹ï¼šå¬å›ç‡é«˜ã€å»¶è¿Ÿä½ï¼Œæ˜¯ç›®å‰æ€§èƒ½æœ€ä¼˜çš„ANNç´¢å¼•ç±»å‹ä¹‹ä¸€ã€‚

### 1.3é‡åŒ–å‹ç¼©ç±»ï¼ˆQuantization-based Indexï¼‰

é€šè¿‡å‹ç¼©å‘é‡å­˜å‚¨ä¸è¿‘ä¼¼è·ç¦»è®¡ç®—æ¥èŠ‚çœèµ„æºã€‚
ä»£è¡¨ç®—æ³•ï¼š

- PQï¼ˆProduct Quantizationï¼‰ï¼šå°†é«˜ç»´å‘é‡åˆ†å—å¹¶åˆ†åˆ«é‡åŒ–ï¼Œä½¿ç”¨çŸ­ç è¿‘ä¼¼è¡¨ç¤ºåŸå‘é‡ã€‚
- OPQï¼ˆOptimized PQï¼‰ï¼šåœ¨PQåŸºç¡€ä¸Šå¢åŠ æ—‹è½¬ä¼˜åŒ–ï¼Œä½¿é‡åŒ–è¯¯å·®æ›´å°ã€‚
- SQï¼ˆScalar Quantizationï¼‰ï¼šæ¯ä¸ªç»´åº¦ç‹¬ç«‹é‡åŒ–ï¼Œç®€å•ä½†å‹ç¼©ç‡æœ‰é™ã€‚  

> ğŸ“Œ ç‰¹ç‚¹ï¼šæå¤§é™ä½å†…å­˜å ç”¨ï¼Œé€‚åˆæµ·é‡æ•°æ®å’Œèµ„æºå—é™åœºæ™¯ã€‚

### 1.4å“ˆå¸Œç±»ï¼ˆHash-based Indexï¼‰

é€šè¿‡å“ˆå¸Œå‡½æ•°å°†ç›¸ä¼¼å‘é‡æ˜ å°„åˆ°ç›¸åŒæ¡¶ï¼ˆBucketï¼‰ï¼Œå®ç°è¿‘ä¼¼ç›¸ä¼¼åº¦æ£€ç´¢ã€‚
ä»£è¡¨ç®—æ³•ï¼š

- LSHï¼ˆLocality Sensitive Hashingï¼‰ï¼šé€šè¿‡ç‰¹å®šå“ˆå¸Œå‡½æ•°ï¼ˆå¦‚éšæœºæŠ•å½±ï¼‰ä¿æŒç›¸ä¼¼æ€§ã€‚
- SimHash / MinHashï¼šç”¨äºæ–‡æœ¬æˆ–ç¨€ç–ç‰¹å¾çš„å¿«é€Ÿç›¸ä¼¼åº¦åŒ¹é…ã€‚

> ğŸ“Œ ç‰¹ç‚¹ï¼šè®¡ç®—ç®€å•ã€å¯å¹¶è¡Œï¼Œä½†å¬å›ç‡è¾ƒä½ï¼Œå¸¸ç”¨äºç²—ç­›é˜¶æ®µã€‚

### 1.5æ··åˆç´¢å¼•ï¼ˆHybrid Indexï¼‰

ç»“åˆå¤šç§æŠ€æœ¯å–é•¿è¡¥çŸ­ï¼Œä»¥å…¼é¡¾é€Ÿåº¦ã€ç²¾åº¦ä¸èµ„æºã€‚
å¸¸è§ç»„åˆï¼š

- IVF+PQï¼ˆFAISS é»˜è®¤æ–¹æ¡ˆï¼‰ï¼šå…ˆèšç±»å†é‡åŒ–ï¼Œå¹³è¡¡æ€§èƒ½ä¸å­˜å‚¨ã€‚
- HNSW+PQï¼šåœ¨å›¾ç´¢å¼•åŸºç¡€ä¸Šè¿›è¡Œé‡åŒ–ï¼Œé€‚åˆå¤§è§„æ¨¡é«˜ç»´æ£€ç´¢ã€‚
- DiskANN / SPANNï¼šç»“åˆå›¾ç´¢å¼•ä¸ç£ç›˜è®¿é—®ä¼˜åŒ–ï¼Œç”¨äºè¶…å¤§è§„æ¨¡æ•°æ®ã€‚

> ğŸ“Œ ç‰¹ç‚¹ï¼šå·¥ä¸šçº§åº”ç”¨é¦–é€‰æ–¹æ¡ˆï¼Œå¹¿æ³›ç”¨äº Milvusã€FAISSã€Weaviateã€Elasticsearch dense vector ç­‰ç³»ç»Ÿã€‚

### 1.6åŸºäºç£ç›˜æˆ–åˆ†å¸ƒå¼çš„æ‰©å±•ç´¢å¼•

é’ˆå¯¹**è¶…å¤§è§„æ¨¡æ•°æ®ï¼ˆæ•°åäº¿å‘é‡ï¼‰**åœºæ™¯ï¼š

- DiskANNï¼ˆMicrosoftï¼‰ï¼šå›¾ç´¢å¼• + é¡ºåºç£ç›˜è®¿é—®ä¼˜åŒ–ï¼Œå¯åœ¨TBçº§æ•°æ®ä¸Šå®ç°äºšç§’çº§å“åº”ã€‚
- SPANNï¼ˆMicrosoftï¼‰ï¼šåˆ†å¸ƒå¼å‘é‡æœç´¢æ¶æ„ï¼Œç»“åˆå¤šå±‚ç´¢å¼•ä¸åˆ†åŒºè°ƒåº¦ã€‚
- ScaNNï¼ˆGoogleï¼‰ï¼šèåˆç©ºé—´åˆ’åˆ†ä¸é‡åŒ–ï¼Œä¼˜åŒ–äº†ANNåœ¨TPU/GPUç¯å¢ƒä¸‹çš„æ€§èƒ½ã€‚

> ğŸ“Œ ç‰¹ç‚¹ï¼šé¢å‘åˆ†å¸ƒå¼ã€è¶…å¤§è§„æ¨¡ã€äº‘åŸç”Ÿå‘é‡æ£€ç´¢ã€‚

## 2.å‘é‡ç´¢å¼•ç±»å‹å¯¹æ¯”è¡¨

| ç´¢å¼•ç±»å‹            | ä»£è¡¨ç®—æ³•              | æ ¸å¿ƒæ€æƒ³                       | ä¼˜åŠ¿                     | å±€é™                   |
| ------------------- | --------------------- | ------------------------------ | ------------------------ | ---------------------- |
| **ç©ºé—´åˆ’åˆ†ç±»**      | IVF, KD-Tree, Annoy   | ç©ºé—´åˆ’åˆ† + å±€éƒ¨æœç´¢            | ç®€å•é«˜æ•ˆ                 | é«˜ç»´é€€åŒ–               |
| **å›¾ç´¢å¼•ç±»**        | HNSW, NSG             | æ„å»ºè¿‘é‚»å›¾è¿›è¡Œå¯¼èˆªæœç´¢         | é«˜å¬å›ç‡ï¼Œä½å»¶è¿Ÿ         | æ„å»ºæˆæœ¬é«˜ï¼Œæ›´æ–°æ…¢     |
| **é‡åŒ–å‹ç¼©ç±»**      | PQ, OPQ, SQ           | å‘é‡å‹ç¼© + è¿‘ä¼¼è·ç¦»è®¡ç®—        | å†…å­˜å ç”¨ä½ï¼Œé€Ÿåº¦å¿«       | ç²¾åº¦ä¸‹é™               |
| **å“ˆå¸Œç±»**          | LSH, SimHash          | å“ˆå¸Œæ˜ å°„ä¿æŒç›¸ä¼¼æ€§             | æŸ¥è¯¢é€Ÿåº¦æå¿«ï¼Œå¯å¹¶è¡Œ     | å¬å›ç‡è¾ƒä½             |
| **æ··åˆç´¢å¼•**        | IVF+PQ, HNSW+PQ       | èåˆå¤šç§ç´¢å¼•ä¼˜åŠ¿               | å¹³è¡¡é€Ÿåº¦ã€ç²¾åº¦ä¸å­˜å‚¨     | å®ç°å¤æ‚ï¼Œå‚æ•°å¤š       |

æ¥ä¸‹æ¥ï¼Œæœ¬èŠ‚é’ˆå¯¹ä¸åŒç´¢å¼•ä¸­çš„**ä»£è¡¨æ€§ç®—æ³•**è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚

### 2.1 åŸºäºèšç±»çš„ç´¢å¼• (IVF)

IVFï¼ˆ**Inverted File Index**ï¼Œå€’æ’æ–‡ä»¶ç´¢å¼•ï¼‰æ˜¯ä¸€ç§**åŸºäºèšç±»æ€æƒ³**çš„è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢æ–¹æ³•ã€‚  
å®ƒé€šè¿‡å°†æ•´ä¸ªå‘é‡ç©ºé—´åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ª**ç°‡ï¼ˆClusterï¼‰**ï¼Œå¹¶å°†æ¯ä¸ªå‘é‡åˆ†é…åˆ°å¯¹åº”çš„ç°‡ä¸­ï¼Œä»è€Œåœ¨æœç´¢æ—¶åªéœ€åœ¨ä¸æŸ¥è¯¢å‘é‡æœ€ç›¸è¿‘çš„ç°‡ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¤§å¹…å‡å°‘æœç´¢èŒƒå›´ã€‚

å¯ä»¥æŠŠ IVF æƒ³è±¡æˆåœ¨ä¸€ä¸ª**å·¨å¤§çš„å›¾ä¹¦é¦†**ä¸­æ‰¾ä¹¦çš„è¿‡ç¨‹ã€‚  
å¦‚æœæ‰€æœ‰ä¹¦ç±éƒ½æ‚ä¹±æ— ç« åœ°å †åœ¨ä¸€èµ·ï¼Œä½ åªèƒ½ä¸€æœ¬ä¸€æœ¬åœ°ç¿»æŸ¥ï¼Œè¿™å°±ç›¸å½“äº**æš´åŠ›æœç´¢ï¼ˆBrute Force Searchï¼‰**ï¼Œæ•ˆç‡æä½ã€‚  
è€Œä¸€ä¸ªé«˜æ•ˆçš„å›¾ä¹¦é¦†ï¼Œä¼šå…ˆå°†ä¹¦ç±æŒ‰ç…§ä¸»é¢˜ï¼ˆå¦‚æ–‡å­¦ã€å†å²ã€ç§‘å­¦ï¼‰åˆ†ç±»æ‘†æ”¾ã€‚è¿™æ ·ï¼Œå½“ä½ è¦æ‰¾ä¸€æœ¬â€œç‰©ç†å­¦â€ç›¸å…³çš„ä¹¦æ—¶ï¼Œåªéœ€å»â€œç§‘å­¦â€ä¹¦æ¶ä¸­æŸ¥æ‰¾å³å¯â€”â€”è¿™æ­£æ˜¯ IVF çš„å·¥ä½œåŸç†ã€‚

IVF é‡‡ç”¨çš„æ ¸å¿ƒæ€æƒ³æ˜¯ **â€œåˆ†è€Œæ²»ä¹‹ï¼ˆDivide and Conquerï¼‰â€**ï¼š

1. **èšç±»é˜¶æ®µï¼ˆç´¢å¼•æ„å»ºï¼‰**ï¼š  
   ä½¿ç”¨èšç±»ç®—æ³•ï¼ˆå¦‚ K-Meansï¼‰å°†æ‰€æœ‰å‘é‡åˆ’åˆ†æˆè‹¥å¹²ä¸ªç°‡ï¼Œå¹¶è®°å½•æ¯ä¸ªç°‡çš„ä¸­å¿ƒç‚¹ï¼ˆCentroidï¼‰ã€‚  
   æ¯ä¸ªå‘é‡åªä¸å…¶æ‰€å±ç°‡ç»‘å®šï¼Œå½¢æˆä¸€ç§â€œå€’æ’è¡¨â€ç»“æ„ã€‚

2. **æœç´¢é˜¶æ®µï¼ˆæŸ¥è¯¢è¿‡ç¨‹ï¼‰**ï¼š  
   - é¦–å…ˆè®¡ç®—æŸ¥è¯¢å‘é‡ä¸æ‰€æœ‰ç°‡ä¸­å¿ƒçš„è·ç¦»ï¼›  
   - é€‰å‡ºè·ç¦»æœ€è¿‘çš„å‡ ä¸ªç°‡ï¼ˆé€šå¸¸ç§°ä¸º `nprobe`ï¼‰ï¼›  
   - ä»…åœ¨è¿™äº›ç°‡å†…éƒ¨è¿›è¡Œç²¾ç»†çš„ç›¸ä¼¼åº¦è®¡ç®—ã€‚  

è¿™ç§ç­–ç•¥å¤§å¹…å‡å°‘äº†éœ€è¦æ¯”è¾ƒçš„å‘é‡æ•°é‡ï¼Œä½¿æœç´¢æ•ˆç‡ç›¸æ¯”æš´åŠ›æœç´¢å®ç°**æŒ‡æ•°çº§æå‡**ã€‚

**âœ… IVF çš„æ ¸å¿ƒä¼˜åŠ¿**

- **é«˜æ•ˆç‡**ï¼šåªåœ¨éƒ¨åˆ†ç°‡å†…æœç´¢ï¼Œæ˜¾è‘—å‡å°‘è®¡ç®—é‡ï¼›  
- **æ˜“æ‰©å±•**ï¼šèšç±»ç»“æ„æ¸…æ™°ï¼Œé€‚ç”¨äºæµ·é‡å‘é‡åœºæ™¯ï¼›  
- **å¯ç»„åˆæ€§å¼º**ï¼šå¸¸ä¸ PQï¼ˆProduct Quantizationï¼‰æˆ– HNSW ç­‰ç®—æ³•ç»“åˆï¼Œè¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚  

å› æ­¤ï¼ŒIVF æ˜¯å‘é‡æ•°æ®åº“ï¼ˆå¦‚ **FAISSã€Milvus**ï¼‰ä¸­æœ€ç»å…¸ã€æœ€å¹¿æ³›ä½¿ç”¨çš„ç´¢å¼•ç»“æ„ä¹‹ä¸€ï¼Œä¸ºé«˜ç»´å‘é‡çš„é«˜æ•ˆæ£€ç´¢å¥ å®šäº†åŸºç¡€ã€‚

### 2.2 åŸºäºå›¾çš„ç´¢å¼• (HNSW)â€‹

HNSWï¼ˆ**Hierarchical Navigable Small World**ï¼Œåˆ†å±‚å¯å¯¼èˆªå°ä¸–ç•Œå›¾ï¼‰æ˜¯ä¸€ç§**åŸºäºå›¾ç»“æ„çš„è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢ç®—æ³•**ã€‚  
ä¸ IVF çš„â€œåˆ†è€Œæ²»ä¹‹â€æ€è·¯ä¸åŒï¼ŒHNSW é‡‡ç”¨çš„æ˜¯â€œä»¥å›¾æœå›¾â€çš„ç­–ç•¥â€”â€”é€šè¿‡æ„å»ºä¸€ä¸ª**å¤šå±‚æ¬¡çš„é‚»è¿‘å…³ç³»å›¾ï¼ˆè¿‘ä¼¼å°ä¸–ç•Œç½‘ç»œï¼‰**ï¼Œè®©å‘é‡ä¹‹é—´å½¢æˆé«˜æ•ˆçš„å¯¼èˆªè·¯å¾„ï¼Œä»è€Œå¿«é€Ÿæ‰¾åˆ°ç›®æ ‡å‘é‡ã€‚

å¯ä»¥æŠŠ HNSW æƒ³è±¡æˆåœ¨ä¸€åº§**å¤šå±‚è¿·å®«åŸå¸‚**ä¸­å¯»æ‰¾ç›®æ ‡ä½ç½®çš„è¿‡ç¨‹ã€‚  
åŸå¸‚ä¸­çš„æ¯ä¸€æ ‹å»ºç­‘ä»£è¡¨ä¸€ä¸ªå‘é‡ï¼Œè€Œé“è·¯ä»£è¡¨è¿™äº›å‘é‡ä¹‹é—´çš„ç›¸ä¼¼å…³ç³»ï¼š

- åœ¨æœ€ä¸Šå±‚ï¼Œåªæœ‰å°‘é‡çš„å»ºç­‘å’Œç²—ç•¥çš„ä¸»å¹²é“ï¼Œæ–¹ä¾¿å¿«é€Ÿç¡®å®šå¤§è‡´æ–¹å‘ï¼›  
- è¶Šå¾€ä¸‹å±‚ï¼Œå»ºç­‘è¶Šæ¥è¶Šå¤šï¼Œé“è·¯ä¹Ÿè¶Šæ¥è¶Šå¯†é›†ï¼Œç”¨äºåœ¨å±€éƒ¨åŒºåŸŸä¸­è¿›è¡Œæ›´ç²¾ç¡®çš„æœç´¢ã€‚  

å½“æœ‰ä¸€ä¸ªæŸ¥è¯¢å‘é‡è¿›å…¥ç³»ç»Ÿæ—¶ï¼Œç®—æ³•ä¼šå…ˆä»æœ€é«˜å±‚å¼€å§‹ï¼Œåƒåœ¨åŸå¸‚çš„é«˜ç©ºä¿¯ç°ä¸€æ ·ï¼Œå¿«é€Ÿç¡®å®šä¸€ä¸ªé è¿‘ç›®æ ‡çš„å¤§è‡´ä½ç½®ï¼›  
ç„¶åé€å±‚å‘ä¸‹â€œç€é™†â€ï¼Œåœ¨æ›´ä½å±‚çš„å›¾ä¸­è¿›è¡Œå±€éƒ¨æœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°æœ€æ¥è¿‘çš„å‘é‡ã€‚  
è¿™ç§â€œé€å±‚ç¼©å°èŒƒå›´ + å±‚å†…å±€éƒ¨ç²¾ç»†æœç´¢â€**çš„æœºåˆ¶ï¼Œä½¿å¾— HNSW èƒ½åœ¨æå¤§ç¨‹åº¦ä¸Šå…¼é¡¾æœç´¢çš„**é€Ÿåº¦ä¸ç²¾åº¦ã€‚

ç›¸æ¯” IVF ä¾èµ–èšç±»åˆ’åˆ†ç©ºé—´ï¼ŒHNSW ä¸éœ€è¦æ˜¾å¼çš„èšç±»æ­¥éª¤ï¼Œè€Œæ˜¯é€šè¿‡æ„å»ºç¨€ç–çš„ã€å±‚çº§åŒ–çš„å›¾ç»“æ„ï¼Œä½¿å¾—æ¯ä¸ªèŠ‚ç‚¹æ—¢èƒ½å¿«é€Ÿè·³è½¬åˆ°è¿œå¤„çš„åŒºåŸŸï¼Œåˆèƒ½åœ¨é‚»åŸŸå†…è¿›è¡Œç»†ç²’åº¦æœç´¢ã€‚  
è¿™ç±»ä¼¼äºäººç±»åœ¨åœ°å›¾ä¸Š**å…ˆå®šä½åŸå¸‚ â†’ å†æ‰¾è¡—åŒº â†’ æœ€åæ‰¾åˆ°é—¨ç‰Œå·**çš„è¿‡ç¨‹ã€‚

**âœ… HNSW çš„æ ¸å¿ƒä¼˜åŠ¿**

- **é«˜æŸ¥å‡†ç‡**ï¼šèƒ½åœ¨é«˜ç»´ç©ºé—´ä¸­ä¿æŒè¾ƒé«˜çš„è¿‘ä¼¼ç²¾åº¦ï¼›  
- **æœç´¢é«˜æ•ˆ**ï¼šå›¾ç»“æ„å¤©ç„¶æ”¯æŒâ€œè·³è·ƒå¼â€å¯¼èˆªï¼Œèƒ½å¿«é€Ÿé”å®šç›®æ ‡åŒºåŸŸï¼›  
- **åŠ¨æ€å¯æ‰©å±•**ï¼šå¯ä»¥é€æ­¥æ’å…¥æ–°å‘é‡è€Œæ— éœ€å®Œå…¨é‡å»ºç´¢å¼•ã€‚  

å› æ­¤ï¼ŒHNSW å·²æˆä¸ºå½“ä»Šå‘é‡æ•°æ®åº“ï¼ˆå¦‚ **Milvusã€FAISSã€Weaviate** ç­‰ï¼‰ä¸­æ€§èƒ½æœ€ä¼˜ã€åº”ç”¨æœ€å¹¿çš„ç´¢å¼•ç»“æ„ä¹‹ä¸€ã€‚


### 2.3 é‡åŒ–æŠ€æœ¯ (PQ)

PQï¼ˆ**Product Quantization**ï¼Œä¹˜ç§¯é‡åŒ–ï¼‰æ˜¯ä¸€ç§**å‘é‡å‹ç¼©ä¸è¿‘ä¼¼æœç´¢æŠ€æœ¯**ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯â€”â€”**åœ¨ä¿è¯è¾ƒé«˜æ£€ç´¢ç²¾åº¦çš„åŒæ—¶ï¼Œæ˜¾è‘—é™ä½å­˜å‚¨ç©ºé—´ä¸è®¡ç®—æˆæœ¬**ã€‚  
å®ƒé€šå¸¸ä¸ IVF ç­‰ç´¢å¼•ç»“æ„ç»“åˆä½¿ç”¨ï¼ˆå¦‚ IVF-PQï¼‰ï¼Œæˆä¸ºé«˜æ•ˆçš„è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢æ–¹æ¡ˆã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ éœ€è¦åœ¨ä¸Šäº¿ä¸ªé«˜ç»´å‘é‡ä¸­æ‰¾åˆ°æœ€ç›¸ä¼¼çš„å‡ ä¸ªå‘é‡ã€‚  
å¦‚æœæ¯ä¸ªå‘é‡éƒ½è¦å®Œæ•´åœ°å­˜å‚¨å’Œæ¯”å¯¹ï¼Œé‚£ä¹ˆä¸ä»…å ç”¨å·¨é‡å†…å­˜ï¼Œè¿˜ä¼šå¯¼è‡´æœç´¢æ—¶é—´æš´æ¶¨ã€‚  
PQ çš„æ€è·¯å°±åƒæ˜¯â€œ**æŠŠå¤æ‚çš„å‘é‡æ‹†å¼€å‹ç¼©æˆå°ç‰‡æ®µï¼Œå†åœ¨å‹ç¼©åçš„ç©ºé—´ä¸­è¿›è¡Œé«˜æ•ˆæ¯”è¾ƒ**â€ã€‚

**ğŸ§© PQ çš„æ ¸å¿ƒæ€æƒ³**

PQ é€šè¿‡ä¸€ç§â€œåˆ†å— + é‡åŒ–â€çš„ç­–ç•¥æ¥è¡¨ç¤ºé«˜ç»´å‘é‡ï¼š

1. **åˆ†å—ï¼ˆSubspace Divisionï¼‰**  
   å°†åŸå§‹çš„é«˜ç»´å‘é‡ï¼ˆå¦‚ 128 ç»´ï¼‰åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä½ç»´å­ç©ºé—´ï¼ˆå¦‚ 8 ä¸ª 16 ç»´å­ç©ºé—´ï¼‰ã€‚  

2. **é‡åŒ–ï¼ˆQuantizationï¼‰**  
   å¯¹æ¯ä¸ªå­ç©ºé—´å•ç‹¬è¿›è¡Œèšç±»ï¼ˆå¦‚ä½¿ç”¨ K-Meansï¼‰ï¼Œç”Ÿæˆå¤šä¸ª**å­ç æœ¬ï¼ˆCodebookï¼‰**ï¼Œæ¯ä¸ªå‘é‡åœ¨å¯¹åº”å­ç©ºé—´ä¸­ä¼šè¢«è¡¨ç¤ºä¸º**ä¸€ä¸ªèšç±»ä¸­å¿ƒçš„ç¼–å·**ã€‚  
   æœ€ç»ˆï¼Œä¸€ä¸ªå‘é‡å°±ä¸å†ä»¥æµ®ç‚¹æ•°å­˜å‚¨ï¼Œè€Œæ˜¯ä»¥ä¸€ç»„â€œç´¢å¼•ç¼–å·â€è¡¨ç¤ºâ€”â€”å¤§å¤§å‡å°‘å­˜å‚¨ç©ºé—´ã€‚

3. **æœç´¢é˜¶æ®µï¼ˆApproximate Distance Computationï¼‰**  
   åœ¨æœç´¢æ—¶ï¼ŒPQ ä¸å†è®¡ç®—å®Œæ•´çš„æ¬§æ°è·ç¦»ï¼Œè€Œæ˜¯é€šè¿‡é¢„å…ˆè®¡ç®—çš„â€œæŸ¥è¡¨æ³•ï¼ˆLookup Tableï¼‰â€å¿«é€Ÿä¼°ç®—å‘é‡é—´çš„è·ç¦»ï¼Œå®ç°**å¸¸æ•°æ—¶é—´çº§åˆ«çš„ç›¸ä¼¼åº¦è®¡ç®—**ã€‚

**âœ… PQ çš„æ ¸å¿ƒä¼˜åŠ¿**

- **æé«˜çš„å‹ç¼©ç‡**ï¼šå¯å°†åŸå§‹å‘é‡å­˜å‚¨ç©ºé—´å‹ç¼©è‡³åŸæ¥çš„ 1/10 ç”šè‡³æ›´å°‘ï¼›  
- **è®¡ç®—é«˜æ•ˆ**ï¼šé€šè¿‡æŸ¥è¡¨æ³•å¿«é€Ÿä¼°ç®—è·ç¦»ï¼Œæå¤§å‡å°‘è®¡ç®—é‡ï¼›  
- **å¯ç»„åˆæ€§å¼º**ï¼šå¸¸ä¸ IVFï¼ˆIVF-PQï¼‰ã€HNSWï¼ˆHNSW-PQï¼‰ç­‰ç´¢å¼•ç»“æ„ç»“åˆï¼Œå…¼é¡¾é€Ÿåº¦ä¸ç²¾åº¦ã€‚  

**ğŸ’¡ ç±»æ¯”ç†è§£**

å¯ä»¥æŠŠ PQ æƒ³è±¡æˆâ€œ**æŠŠä¸€æœ¬åšé‡çš„ç™¾ç§‘å…¨ä¹¦æ‹†åˆ†æˆè‹¥å¹²ä¸ªä¸»é¢˜å†Œï¼Œç„¶ååªä¿ç•™æ¯å†Œçš„ç´¢å¼•ç¼–å·**â€ã€‚  
è™½ç„¶ä½ ä¸¢å¤±äº†ä¸€äº›ç»†èŠ‚ä¿¡æ¯ï¼ˆè¿‘ä¼¼è®¡ç®—ï¼‰ï¼Œä½†é€šè¿‡è¿™äº›ç¼–å·ï¼Œä½ ä¾ç„¶èƒ½å¿«é€Ÿå®šä½æœ€ç›¸å…³çš„ç« èŠ‚ï¼ˆç›¸ä¼¼å‘é‡ï¼‰ã€‚

å› æ­¤ï¼ŒPQ æ˜¯ç°ä»£å‘é‡æ•°æ®åº“ä¸­**å…¼é¡¾å­˜å‚¨æ•ˆç‡ä¸æœç´¢é€Ÿåº¦**çš„å…³é”®æŠ€æœ¯ä¹‹ä¸€ï¼Œå¹¿æ³›åº”ç”¨äºå¤§è§„æ¨¡å‘é‡æ£€ç´¢åœºæ™¯ï¼Œå¦‚å›¾åƒæ£€ç´¢ã€æ–‡æœ¬ç›¸ä¼¼åº¦åŒ¹é…å’Œæ¨èç³»ç»Ÿç­‰ã€‚

### 2.4 åŸºäºå“ˆå¸Œçš„ç´¢å¼• (Hash-based Index)

åŸºäºå“ˆå¸Œï¼ˆ**Hashing**ï¼‰çš„ç´¢å¼•æ˜¯ä¸€ç±»é€šè¿‡**å“ˆå¸Œå‡½æ•°å°†é«˜ç»´å‘é‡æ˜ å°„ä¸ºç´§å‡‘çš„äºŒè¿›åˆ¶ç **çš„è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢æ–¹æ³•ã€‚  
å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š**ç›¸ä¼¼çš„å‘é‡åœ¨å“ˆå¸Œç©ºé—´ä¸­åº”è¢«æ˜ å°„åˆ°ç›¸ä¼¼æˆ–ç›¸åŒçš„å“ˆå¸Œç ä¸Š**ï¼Œä»è€Œå®ç°â€œä»¥ç ä»£è·â€çš„å¿«é€Ÿè¿‘ä¼¼æœç´¢ã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦åœ¨ä¸Šäº¿å¼ å›¾ç‰‡ä¸­æ‰¾åˆ°ä¸ç›®æ ‡å›¾ç‰‡ç›¸ä¼¼çš„å‡ å¼ ã€‚  
å¦‚æœæ¯å¼ å›¾ç‰‡éƒ½éœ€è¦è®¡ç®—å®Œæ•´çš„ç‰¹å¾è·ç¦»ï¼Œä»£ä»·æé«˜ã€‚  
è€Œå“ˆå¸ŒæŠ€æœ¯å°±åƒä¸ºæ¯å¼ å›¾ç‰‡æ‰“ä¸Šä¸€ä¸ªâ€œç‰¹å¾æŒ‡çº¹â€ï¼Œ**ç›¸ä¼¼çš„å›¾ç‰‡æŒ‡çº¹ä¹Ÿä¼šç›¸ä¼¼**ã€‚  
è¿™æ ·ï¼Œç³»ç»Ÿåªéœ€æ¯”è¾ƒæŒ‡çº¹ä¹‹é—´çš„å·®å¼‚ï¼ˆå“ˆå¸Œç è·ç¦»ï¼‰ï¼Œå°±èƒ½å¿«é€Ÿç­›å‡ºå€™é€‰ç»“æœã€‚

**âš™ï¸ å“ˆå¸Œç´¢å¼•çš„æ ¸å¿ƒæ€æƒ³**

å“ˆå¸Œæ–¹æ³•çš„åŸºæœ¬æµç¨‹å¯åˆ†ä¸ºä¸‰æ­¥ï¼š

1. **å“ˆå¸Œå‡½æ•°æ„å»ºï¼ˆHash Function Designï¼‰**  
   é€šè¿‡ç‰¹å®šçš„å“ˆå¸Œå‡½æ•°ï¼ˆå¦‚éšæœºæŠ•å½±ã€å­¦ä¹ å“ˆå¸Œï¼‰å°†é«˜ç»´å‘é‡æ˜ å°„åˆ°ä½ç»´äºŒè¿›åˆ¶ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª 128 ç»´å‘é‡å¯èƒ½è¢«æ˜ å°„æˆä¸€ä¸ª 64 ä½çš„äºŒè¿›åˆ¶ç ã€‚  

2. **å“ˆå¸Œç ç”Ÿæˆï¼ˆHash Code Generationï¼‰**  
   æ¯ä¸ªå‘é‡è¢«ç¼–ç æˆå›ºå®šé•¿åº¦çš„å“ˆå¸Œç ï¼ˆå¦‚ `101010...`ï¼‰ï¼Œè¿™ç›¸å½“äºä¸ºæ¯ä¸ªæ•°æ®ç”Ÿæˆå”¯ä¸€çš„â€œäºŒè¿›åˆ¶èº«ä»½æ ‡è¯†â€ã€‚  

3. **å“ˆå¸Œæ¡¶æŸ¥æ‰¾ï¼ˆBucket Searchï¼‰**  
   æ£€ç´¢æ—¶ï¼Œç³»ç»Ÿæ ¹æ®æŸ¥è¯¢å‘é‡çš„å“ˆå¸Œç ï¼Œç›´æ¥æŸ¥æ‰¾ä¸ä¹‹ç›¸åŒæˆ–ç›¸è¿‘çš„å“ˆå¸Œæ¡¶ï¼ˆBucketï¼‰ä¸­çš„å‘é‡ï¼Œè€Œä¸å¿…éå†æ‰€æœ‰æ•°æ®ã€‚  
   ç›¸ä¼¼åº¦å¯é€šè¿‡å“ˆå¸Œç ä¹‹é—´çš„ **æ±‰æ˜è·ç¦»ï¼ˆHamming Distanceï¼‰** è¿›è¡Œå¿«é€Ÿæ¯”è¾ƒã€‚

**âœ… å“ˆå¸ŒæŠ€æœ¯çš„ä¸»è¦ä¼˜åŠ¿**

- **é€Ÿåº¦æå¿«**ï¼šäºŒè¿›åˆ¶è¿ç®—å’Œæ±‰æ˜è·ç¦»è®¡ç®—å¯åœ¨ç¡¬ä»¶çº§å®ç°ï¼Œé€Ÿåº¦è¿œé«˜äºä¼ ç»Ÿè·ç¦»è®¡ç®—ï¼›  
- **å­˜å‚¨é«˜æ•ˆ**ï¼šæ¯ä¸ªå‘é‡åªéœ€å‡ ä¸ªå­—èŠ‚çš„å“ˆå¸Œç ï¼Œå¤§å¹…å‡å°‘å†…å­˜å ç”¨ï¼›  
- **é€‚ç”¨äºè¶…å¤§è§„æ¨¡æ•°æ®**ï¼šå¯è½»æ¾åº”å¯¹ä¸Šäº¿çº§åˆ«çš„å‘é‡æ£€ç´¢ä»»åŠ¡ã€‚  

**âš ï¸ å“ˆå¸Œç´¢å¼•çš„å±€é™**

- **ç²¾åº¦è¾ƒä½**ï¼šå“ˆå¸Œæ˜ å°„å­˜åœ¨ä¿¡æ¯æŸå¤±ï¼Œå¯èƒ½å¯¼è‡´éƒ¨åˆ†è¿‘é‚»è¢«é”™è¿‡ï¼›  
- **éš¾ä»¥è‡ªé€‚åº”**ï¼šä¼ ç»Ÿéšæœºå“ˆå¸Œï¼ˆå¦‚ LSHï¼‰æ— æ³•å¾ˆå¥½é€‚åº”æ•°æ®åˆ†å¸ƒã€‚  

å› æ­¤ï¼Œåœ¨ç°ä»£å‘é‡æ•°æ®åº“ä¸­ï¼Œå“ˆå¸Œæ–¹æ³•å¾€å¾€ä¸å…¶ä»–æŠ€æœ¯ï¼ˆå¦‚ **IVFã€PQã€HNSW**ï¼‰ç»„åˆä½¿ç”¨ï¼Œç”¨äº**ç²—ç­›é˜¶æ®µ**æˆ–**å¿«é€Ÿé¢„æ£€ç´¢**ã€‚

**ğŸ’¡ ç±»æ¯”ç†è§£**

å¯ä»¥æŠŠå“ˆå¸Œç´¢å¼•æƒ³è±¡æˆ**ä¸ºæ¯ä¸ªå‘é‡ç”Ÿæˆä¸€å¼ â€œæŒ‡çº¹å¡â€**ã€‚  
å½“ä½ éœ€è¦æ‰¾ç›¸ä¼¼çš„å¯¹è±¡æ—¶ï¼Œä¸å¿…çœ‹å®Œæ•´çš„ç…§ç‰‡ï¼ˆå‘é‡ç‰¹å¾ï¼‰ï¼Œ  
è€Œæ˜¯åªéœ€æ¯”å¯¹â€œæŒ‡çº¹â€æ˜¯å¦ç›¸ä¼¼ï¼ˆå“ˆå¸Œç è·ç¦»ï¼‰ã€‚  
è™½ç„¶è¿™ç§æ–¹æ³•ç•¥æœ‰è¯¯å·®ï¼Œä½†åœ¨å¤§è§„æ¨¡æ£€ç´¢åœºæ™¯ä¸‹ï¼Œèƒ½ä»¥æä½çš„æˆæœ¬å®ç°æƒŠäººçš„æœç´¢é€Ÿåº¦ã€‚

å› æ­¤ï¼ŒåŸºäºå“ˆå¸Œçš„ç´¢å¼•æ˜¯å‘é‡æ£€ç´¢ä½“ç³»ä¸­**æœ€è½»é‡ã€æœ€å¿«é€Ÿ**çš„ä¸€ç±»æ–¹æ¡ˆï¼Œ  
ç‰¹åˆ«é€‚åˆåœ¨æ—©æœŸé˜¶æ®µè¿›è¡Œ**å€™é€‰é›†å¿«é€Ÿè¿‡æ»¤**ï¼Œå†ç»“åˆå…¶ä»–é«˜ç²¾åº¦ç´¢å¼•è¿›è¡Œç²¾ç»†æœç´¢ã€‚

### 2.5 æ··åˆç´¢å¼• (Hybrid Index)

æ··åˆç´¢å¼•ï¼ˆ**Hybrid Index**ï¼‰æ˜¯ä¸€ç§**èåˆå¤šç§ç´¢å¼•æŠ€æœ¯ä¼˜åŠ¿**çš„è¿‘ä¼¼æœ€è¿‘é‚»æœç´¢æ–¹æ³•ã€‚  
å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯â€”â€”**åœ¨é€Ÿåº¦ã€ç²¾åº¦ã€å­˜å‚¨å¼€é”€ä¸‰è€…ä¹‹é—´å–å¾—æœ€ä¼˜å¹³è¡¡**ã€‚  
åœ¨å®é™…çš„å¤§è§„æ¨¡å‘é‡æ£€ç´¢ç³»ç»Ÿä¸­ï¼Œå•ä¸€ç´¢å¼•å¾€å¾€éš¾ä»¥åŒæ—¶æ»¡è¶³æ‰€æœ‰éœ€æ±‚ï¼Œå› æ­¤æ··åˆç´¢å¼•æˆä¸ºå·¥ä¸šçº§ç³»ç»Ÿçš„ä¸»æµæ–¹æ¡ˆä¹‹ä¸€ã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦åœ¨ä¸€åº§**è¶…å¤§å‹å›¾ä¹¦é¦†**ä¸­å¿«é€Ÿæ‰¾åˆ°æŸä¸ªä¸»é¢˜çš„ä¹¦ï¼š  
- ä½ å¯ä»¥å…ˆæ ¹æ®**ä¸»é¢˜åˆ†ç±»ï¼ˆIVFï¼‰**ç¡®å®šå¤§è‡´åŒºåŸŸï¼›  
- å†ç”¨**å“ˆå¸ŒæŒ‡çº¹ï¼ˆHashingï¼‰**å¿«é€Ÿç­›æ‰æ— å…³çš„ä¹¦ï¼›  
- æœ€åé€šè¿‡**ç²¾ç¡®åŒ¹é…æˆ–é‡åŒ–æ¯”è¾ƒï¼ˆPQ/HNSWï¼‰**ç¡®å®šæœ€ç›¸ä¼¼çš„å‡ æœ¬ã€‚  
è¿™å¥—å¤šå±‚è¿‡æ»¤ä¸ç²¾ç»†æŸ¥æ‰¾ç»“åˆçš„æœºåˆ¶ï¼Œå°±æ˜¯æ··åˆç´¢å¼•çš„æ ¸å¿ƒæ€æƒ³ã€‚

**âš™ï¸ æ··åˆç´¢å¼•çš„å¸¸è§ç»„åˆå½¢å¼**

1. **IVF + PQï¼ˆæœ€ç»å…¸ç»„åˆï¼‰**  
   - å…ˆç”¨ IVF å°†å‘é‡ç©ºé—´åˆ’åˆ†ä¸ºå¤šä¸ªç°‡ï¼›  
   - å†åœ¨æ¯ä¸ªç°‡å†…éƒ¨ä½¿ç”¨ PQ å¯¹å‘é‡è¿›è¡Œå‹ç¼©å­˜å‚¨ä¸å¿«é€Ÿè·ç¦»ä¼°è®¡ã€‚  
   âœ… å…¼é¡¾äº†æœç´¢é€Ÿåº¦ä¸å†…å­˜æ•ˆç‡ï¼Œå¹¿æ³›åº”ç”¨äº FAISSã€Milvus ç­‰ç³»ç»Ÿã€‚

2. **HNSW + PQ**  
   - HNSW æä¾›é«˜ç²¾åº¦çš„å›¾ç»“æ„å¯¼èˆªï¼›  
   - PQ ç”¨äºå‡å°‘å­˜å‚¨å ç”¨ä¸è®¡ç®—é‡ã€‚  
   âœ… é€‚åˆé«˜ç²¾åº¦è¦æ±‚ä½†èµ„æºå—é™çš„åœºæ™¯ã€‚

3. **IVF + HNSW**  
   - IVF ç”¨äºç²—ç²’åº¦èšç±»åˆ†åŒºï¼›  
   - HNSW ç”¨äºåˆ†åŒºå†…çš„ç²¾ç»†å›¾æœç´¢ã€‚  
   âœ… åŒæ—¶æå‡æœç´¢é€Ÿåº¦ä¸å±€éƒ¨å¬å›ç‡ã€‚

4. **Hash + IVF æˆ– Hash + HNSW**  
   - å…ˆç”¨å“ˆå¸Œå¿«é€Ÿè¿‡æ»¤å€™é€‰ï¼›  
   - å†ä½¿ç”¨æ›´ç²¾ç»†çš„ç´¢å¼•ç®—æ³•è¿›è¡Œé«˜ç²¾åº¦æ£€ç´¢ã€‚  
   âœ… é€‚åˆäº¿çº§ä»¥ä¸Šè§„æ¨¡çš„å‘é‡é¢„ç­›é˜¶æ®µã€‚

**âœ… æ··åˆç´¢å¼•çš„æ ¸å¿ƒä¼˜åŠ¿**

- **æ€§èƒ½å‡è¡¡**ï¼šèåˆä¸åŒç®—æ³•ä¼˜ç‚¹ï¼Œåœ¨é€Ÿåº¦ã€ç²¾åº¦ã€èµ„æºå ç”¨ä¹‹é—´å–å¾—æœ€ä½³æŠ˜ä¸­ï¼›  
- **çµæ´»å¯é…ç½®**ï¼šå¯æ ¹æ®åœºæ™¯çµæ´»ç»„åˆç»„ä»¶ï¼ˆå¦‚ç²—æ£€ + ç²¾æ£€ï¼‰ï¼›  
- **å¯æ‰©å±•æ€§å¼º**ï¼šæ”¯æŒå¢é‡æ›´æ–°ä¸å¤šå±‚æ¬¡ç»“æ„ä¼˜åŒ–ï¼›  
- **å·¥ç¨‹å®ç”¨æ€§é«˜**ï¼šå·²æˆä¸ºå‘é‡æ•°æ®åº“çš„ä¸»æµé€‰æ‹©ï¼ˆå¦‚ Milvus çš„ IVF_PQã€HNSW_PQã€Hybrid Index ç­‰å®ç°ï¼‰ã€‚  

**ğŸ’¡ ç±»æ¯”ç†è§£**

å¯ä»¥æŠŠæ··åˆç´¢å¼•ç†è§£ä¸ºä¸€å¥—**å¤šé˜¶æ®µæ£€ç´¢ç³»ç»Ÿ**ï¼š  
åƒæœºåœºå®‰æ£€ä¸€æ ·ï¼Œ  
- ç¬¬ä¸€å…³å¿«é€Ÿç­›æŸ¥ï¼ˆå“ˆå¸Œ/èšç±»ï¼‰ï¼Œ  
- ç¬¬äºŒå…³é‡ç‚¹æ£€æµ‹ï¼ˆé‡åŒ–/å›¾æœç´¢ï¼‰ï¼Œ  
- æœ€åä¸€å…³äººå·¥å¤æ ¸ï¼ˆç²¾ç¡®æ¯”å¯¹ï¼‰ã€‚  

è¿™ç§å¤šå±‚æ¬¡ç­–ç•¥æ—¢èƒ½ä¿æŒé«˜æ•ˆç‡ï¼Œåˆèƒ½ç¡®ä¿æœç´¢ç»“æœçš„é«˜è´¨é‡ã€‚

å› æ­¤ï¼Œæ··åˆç´¢å¼•ï¼ˆHybrid Indexï¼‰ä»£è¡¨äº†å½“å‰å‘é‡æ£€ç´¢é¢†åŸŸçš„**å·¥ç¨‹æœ€ä½³å®è·µ**ï¼Œ  
æ˜¯è¿æ¥ç†è®ºç®—æ³•ä¸å®é™…åº”ç”¨æ€§èƒ½çš„å…³é”®æ¡¥æ¢ã€‚

**ğŸ’¡Tips:**
> æœ¬èŠ‚ANNç®—æ³•ç›¸å…³ä»£ç ipynbï¼šhttps://github.com/datawhalechina/easy-vectordb/tree/main/src/ANN_alorithms
