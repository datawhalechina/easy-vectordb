## Step by step

1. é¦–å…ˆï¼Œæ‰“å¼€é­”æ­ç¤¾åŒºhttps://www.modelscope.cn/my/mynotebook è¿›å…¥è‡ªå·±çš„ä¸»é¡µï¼Œæ‰“å¼€GPUç¯å¢ƒçš„notebookã€‚
2. ç„¶åæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤

```shell
git clone  https://github.com/google-deepmind/limit.git
```

2. ç„¶åï¼Œå› ä¸ºä»£ç ä¸­deviceå‚æ•°çš„é—®é¢˜ï¼Œä½ éœ€è¦æŠŠæˆ‘çš„ä»£ç å¤åˆ¶è¿‡å»ï¼Œæ›¿æ¢æ‰å¯¹åº”çš„æ–‡ä»¶ã€‚ä¿å­˜ã€‚
   > å°†æœ¬æ•™ç¨‹ä¸­free_embedding_experiment.pyæ–‡ä»¶æ›¿æ¢æ‰ä½ cloneä¸‹æ¥çš„ä»£ç çš„free_embedding_experiment.pyæ–‡ä»¶ã€‚
3. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```shell
python3 -m venv venv
# è®°å¾—æ¯æ¬¡å¯åŠ¨çš„æ—¶å€™éƒ½è¦è¿›å…¥è™šæ‹Ÿç¯å¢ƒï¼
source venv/bin/activate
```

4. ä¸‹è½½ä¸‹æ¥åï¼Œä½ å¯ä»¥çœ‹åˆ°limitæ–‡ä»¶å¤¹ï¼Œç„¶åä½ éœ€è¦è¿›å…¥é‡Œé¢çš„codeæ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨ç»ˆç«¯æ‰§è¡Œ
```shell
pip install -r requirements.txt
```

5. è¿è¡Œgenerate_li......æ–‡ä»¶ï¼ŒæŒ‰ç…§æ­¥éª¤ä¸€æ­¥ä¸€æ­¥æ¥å³å¯ï¼Œç”Ÿæˆæ‰€éœ€è¦çš„æ•°æ®é›†ï¼Œå…³äºæ•°æ®é›†çš„å«ä¹‰ï¼Œåé¢å†è®²è§£ï¼Œå…ˆçœ‹åˆ°æ•ˆæœï¼Œå†å­¦ä¹ æ¦‚å¿µç†è®ºã€‚

6. è¿è¡ŒæˆåŠŸåï¼Œæ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼Œè¿è¡Œæµ‹è¯•
```shell
python free_embedding_experiment.py --d=4 --k=2 --enable_critical_n_search=11 --results_output_path="result_d4_k2.json" --device="cpu"
```

æˆ–è€…ä½¿ç”¨GPUï¼Œä½†åœ¨ä½¿ç”¨GPUä¹‹å‰ï¼Œå¦‚æœä½ å·²ç»æŒ‰ç…§äº†JAXï¼Œè¯·å¸è½½ï¼ˆä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºJAXä¸ºäº†è½»é‡åŒ–ï¼Œé»˜è®¤çš„ pip install jax åªå®‰è£…CPUç‰ˆæœ¬ã€‚æ‚¨å¿…é¡»æ˜ç¡®åœ°å®‰è£…ä¸ºGPUç¼–è¯‘çš„ç‰ˆæœ¬ã€‚ï¼‰
> å¦‚æœä½ æƒ³è¦å°è¯•d=15è¿™ç§é«˜ç»´åº¦çš„ï¼Œä¸€å®šè¦ä½¿ç”¨gpuï¼Œcpuçš„å¤„ç†é€Ÿåº¦å¤ªæ…¢äº†ï¼Œä¸è¿‡ï¼Œå¯¹äºæ•ˆæœè€Œè¨€ï¼Œå°è¯•d=4ï¼Œè¿™ç§ä½ç»´åº¦çš„å°±å¤Ÿäº†ã€‚
é¦–å…ˆå¸è½½å½“å‰çš„JAXç„¶åé‡è£…GPUç‰ˆæœ¬
```shell
pip uninstall jax jaxlib
pip install -U "jax[cuda12_pip]" -f https://storage.googleapis.com/jax-releases/jax_cuda_releases.html
# è¿™ä¸ªå‘½ä»¤ä¼šéå¸¸æ…¢ï¼Œæ¯•ç«Ÿæ˜¯å›½å¤–çš„ï¼Œä½†æ˜¯ç­‰ä¸€ä¼šå°±å¥½äº†ï¼Œå¤šé‡è¯•å‡ æ¬¡
```
ç„¶åå†æ‰§è¡Œä¸‹é¢çš„æŒ‡ä»¤
```shell
python free_embedding_experiment.py --d=4 --k=2 --enable_critical_n_search=11 --resultsg_output_path="result_d4_k2.json" --device="gpu"
```
å¦‚æœæŠ¥é”™äº†ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯ç‰ˆæœ¬å†²çªï¼Œ
```shell

pip list | grep jax

```
æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ åˆ é™¤jaxåæ‰§è¡Œè¿™ä¸ªæŒ‡ä»¤æ˜¯çœ‹ä¸åˆ°ä»»ä½•jaxçš„è¾“å‡ºçš„ï¼Œå¦‚æœæœ‰ï¼Œçœ‹ä¸€çœ‹æ˜¯ä¸æ˜¯æŸä¸ªjaxæ²¡æœ‰å¸è½½å¥½ï¼Œé‡æ–°æŠŠå®ƒå¸è½½æ‰å³å¯ã€‚

ç„¶åå†æ‰§è¡Œå®‰è£…Gpuç‰ˆæœ¬çš„jaxï¼Œ**æ­¤å¤„CUDAä¸º12_1ç‰ˆæœ¬**ã€‚

ç„¶åå†æ¬¡æ‰§è¡Œ
```shell
pip list | grep jax
```
æ¬¡ï¼Œæ‚¨åº”è¯¥èƒ½çœ‹åˆ°ä¸‰ä¸ªåŒ…éƒ½è¢«åˆ—å‡ºæ¥äº†ï¼Œç±»ä¼¼ä¸‹é¢è¿™æ ·ï¼ˆç‰ˆæœ¬å·å¯èƒ½ä¼šæœ‰ç»†å¾®å·®åˆ«ï¼‰ï¼š
```shell
jax                      0.4.30
jax-cuda12-pjrt          0.6.2
jaxlib                   0.4.30
```
å¦‚æœå°‘äº†æŸä¸ªï¼Œæ‰§è¡Œpython -c "import jax; print(jax.devices())"
çœ‹ä¸€çœ‹è¾“å‡ºä»€ä¹ˆã€‚ä¸è¡Œå°±å†é‡æ–°å®‰è£…ã€‚

7. ä¸ºäº†æ›´å¥½çš„å±•ç°æ•ˆæœï¼Œä½ å¯ä»¥è°ƒæ•´å‚æ•°ï¼Œå°†dè°ƒæ•´ä¸º5ã€6 or other ç„¶åè¾“å‡ºæ–‡ä»¶è·¯å¾„æ”¹ä¸ºresult_d5_k2.jsonæˆ–è€…å…¶ä»–ï¼Œè¿™é‡Œæˆ‘å°è¯•dä¸º4ã€5ã€6ä¸‰ç§å‚æ•°ï¼Œç”Ÿæˆäº†å¯¹åº”çš„ä¸‰ä¸ªjsonæ–‡ä»¶ï¼ˆåœ¨resultç›®å½•ä¸‹ï¼Œå¦‚æœä½ ä¸æƒ³ç­‰å¾…ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè®°å¾—ä¿®æ”¹outpltæ–‡ä»¶ä¸­çš„åœ°å€ä¸ºä½ ç”Ÿæˆçš„jsonæ–‡ä»¶è·¯å¾„ï¼‰ã€‚
8. è¿›å…¥outplt.ipynbæ–‡ä»¶ï¼Œä¾æ¬¡æ‰§è¡Œï¼Œæœ€ç»ˆä½ å°†ä¼šçœ‹åˆ°æ•ˆæœå›¾ã€‚

## æ‰§è¡Œå‚æ•°çš„å«ä¹‰
| å‚æ•°                  | è¯´æ˜                                                         | ç¤ºä¾‹                |
|-----------------------|-------------------------------------------------------------|---------------------|
| --d                   | åµŒå…¥çš„ç»´åº¦                                                  | --d=8               |
| --k                   | æ¯ä¸ªæŸ¥è¯¢çš„ç›¸å…³æ–‡æ¡£æ•°é‡                                      | --k=2               |
| --enable_critical_n_search | ä¸´ç•Œ N æœç´¢çš„èµ·å§‹å€¼ï¼ˆåˆå§‹æ–‡æ¡£æ•°é‡ï¼‰                         | --enable_critical_n_search=20 |
| --results_output_path | å®éªŒç»“æœä¿å­˜çš„è·¯å¾„ï¼ˆJSONï¼‰                                   | --results_output_path="results.json" |
| --device              | è®­ç»ƒä½¿ç”¨çš„è®¾å¤‡ï¼ˆgpu/cpu/tpuï¼‰                               | --device=gpu        |
| --learning_rate       | å­¦ä¹ ç‡                                                      | --learning_rate=0.01|
| --num_iterations      | æœ€å¤§è®­ç»ƒæ­¥æ•°                                                 | --num_iterations=100000 |
| --show_progress       | æ˜¯å¦æ˜¾ç¤ºè¿›åº¦æ¡                                              | --show_progress=True|
| --early_stopping_patience | æ—©åœè€å¿ƒè½®æ•°                                              | --early_stopping_patience=1000 |

## é¢„ä¼°æ—¶é—´æ¶ˆè€—
```shell
python free_embedding_experiment.py --d=15 --k=2 --enable_critical_n_search=11 --results_output_path="result_d15_k2.json" --device="cpu"
```
æŸ¥çœ‹ç»ˆç«¯å¦‚ä¸‹ï¼š
```shell
I0908 16:19:06.376164 140021081243136 free_embedding_experiment.py:88] Optimizing (n=71,d=15,k=2):   2%|1         | 1701/100000 [19:07<17:57:08,  1.52it/s, loss=0.9497 acc=0.9990]
```
### 1. â€œä¸€è½®â€ vs â€œä¸€æ­¥â€
ä»å¼€å§‹ä¼˜åŒ– `n=10` ç›´åˆ°å®ƒå®Œæˆï¼Œç„¶åå‡†å¤‡å¼€å§‹ `n=11`ï¼Œè¿™æ•´ä¸ªè¿‡ç¨‹æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œä¸€è½®â€ã€‚

è€Œç°åœ¨çœ‹åˆ°çš„ `1351/100000`ï¼Œæ˜¯æˆ‘ä»¬ä¹‹å‰æ²¡æœ‰è®¨è®ºåˆ°çš„ã€æ›´ç»†ç²’åº¦çš„**å†…éƒ¨ä¼˜åŒ–æ­¥éª¤**ã€‚

### 2. è¯¦ç»†è§£è¯»

`Optimizing (n=71,d=15,k=2):`
*  è¿™å‘Šè¯‰æˆ‘ä»¬ï¼Œè„šæœ¬**å·²ç»å®Œæˆäº† `n=70` çš„ä¼˜åŒ–**ï¼Œå¹¶ä¸”ç°åœ¨**åˆšåˆšå¼€å§‹ `n=71` è¿™ä¸€è½®**ã€‚

`1%| | 1351/100000 [15:18<18:00:06, 1.52it/s, loss=0.9506 acc=0.9994]`
*   `100000`: è¿™æ˜¯ä»£ç é‡Œè®¾ç½®çš„æ€»ä¼˜åŒ–**æ­¥éª¤(steps)**æ•°é‡ã€‚ä¸ºäº†è®©æ¨¡å‹å……åˆ†å­¦ä¹ ï¼Œä½œè€…è®¾ç½®äº†ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—ï¼ˆ10ä¸‡æ­¥ï¼‰ã€‚
*   `1351`: è¿™æ˜¯åœ¨ `n=71` è¿™ä¸€è½®é‡Œï¼Œç›®å‰å·²ç»å®Œæˆäº† `1351` æ­¥ï¼Œ1351å˜åˆ°1352ç®—æ˜¯ä¸€æ¬¡è®¡ç®—ï¼Œä½†è¿™åªæ˜¯10ä¸‡æ­¥ä¸­çš„ä¸€å°æ­¥ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º**ä¸€ä¸ªstep**æˆ–**ä¸€ä¸ªbatch**ã€‚
*   `[15:18<18:00:06]`: 
    *   `15:18`: è¡¨ç¤º `n=71` è¿™ä¸€è½®å·²ç»è¿›è¡Œäº†**15åˆ†18ç§’**ã€‚
    *   `<18:00:06`: è¿™æ˜¯ `tqdm` æ ¹æ®å½“å‰é€Ÿåº¦**é¢„ä¼°**çš„å‰©ä½™æ—¶é—´ã€‚å®ƒè®¤ä¸ºï¼Œå…‰æ˜¯è·‘å®Œ `n=71` è¿™ä¸€è½®ï¼Œè¿˜éœ€è¦**18ä¸ªå°æ—¶**
*   `1.52it/s`: å½“å‰çš„ä¼˜åŒ–é€Ÿåº¦ï¼Œæ¯ç§’èƒ½å®Œæˆçº¦1.5ä¸ªå°æ­¥éª¤ï¼ˆiterations/stepsï¼‰ã€‚

---


## æ•°æ®é›†å«ä¹‰

è¿™é‡Œè¯¦ç»†è§£é‡Šä¸€ä¸‹ LIMIT æ•°æ®é›†çš„**æ ¼å¼**å’Œ**ç”¨å¤„**ã€‚

è¿™äº›æ•°æ®æ˜¯è®ºæ–‡ä¸­"Free Embedding Optimization"å®éªŒçš„ç»“æœï¼Œ**å®ƒæ¨¡æ‹Ÿäº†åœ¨ä¸åŒç»´åº¦ (d) ä¸‹ï¼ŒåµŒå…¥æ¨¡å‹ç†è®ºä¸Šèƒ½å¤Ÿæ•è·çš„æ–‡æ¡£ç»„åˆæ•°é‡**ã€‚

*   **`d`**: è¿™æ˜¯åµŒå…¥çš„ç»´åº¦ã€‚è®ºæ–‡çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼Œ**åµŒå…¥çš„ç»´åº¦æ˜¯é™åˆ¶æ¨¡å‹è¡¨ç¤ºæ–‡æ¡£ç»„åˆèƒ½åŠ›çš„å…³é”®å› ç´ ã€‚**
*   **`n`**: è¿™æ˜¯æ–‡æ¡£çš„æ•°é‡ã€‚åœ¨è¿™äº›å®éªŒä¸­ï¼Œ`n` æ˜¯æŒ‡**èƒ½å¤Ÿè¢«æ¨¡å‹æˆåŠŸè¡¨ç¤ºçš„æ–‡æ¡£çš„æœ€å¤§æ•°é‡**ï¼ŒåŒæ—¶ä¿æŒç»™å®šçš„ç»´åº¦ `d` å’Œ `k` (top-k ç»„åˆä¸­çš„ `k`)ã€‚
*   **`k`**: è¿™æ˜¯ "top-k" ç»„åˆä¸­çš„ `k` å€¼ã€‚åœ¨è¿™äº›å®éªŒä¸­ï¼Œ`k` å›ºå®šä¸º 2ï¼Œæ„å‘³ç€æ¨¡å‹éœ€è¦è¯†åˆ«å‡ºä¸¤ä¸ªç›¸å…³çš„æ–‡æ¡£ã€‚
*   **`actual_q_generated`**: è¿™ä»£è¡¨åœ¨ç»™å®š `n` å’Œ `k` çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å¯èƒ½çš„ top-k ç›¸å…³æ–‡æ¡£ç»„åˆçš„å®é™…æ•°é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ `n=5` ä¸” `k=2`ï¼Œåˆ™å¯èƒ½çš„ç»„åˆæ•°é‡ä¸º $\binom{5}{2} = \frac{5 \times 4}{2 \times 1} = 10$ã€‚
*   **`final_accuracy`** å’Œ **`max_accuracy_observed`**: è¿™äº›æŒ‡æ ‡è¡¨ç¤ºæ¨¡å‹åœ¨ç»™å®šç»´åº¦ `d` ä¸‹æˆåŠŸ**æ•è·æ‰€æœ‰ç›¸å…³æ–‡æ¡£ç»„åˆçš„å‡†ç¡®æ€§**ã€‚1.0 çš„å‡†ç¡®ç‡æ„å‘³ç€æ¨¡å‹èƒ½å¤Ÿå®Œç¾åœ°è¡¨ç¤ºæ‰€æœ‰ç»„åˆã€‚
*   **`final_loss`** å’Œ **`best_loss_monitored`**: è¿™äº›æ˜¯ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„æŸå¤±å€¼ã€‚è¾ƒä½çš„æŸå¤±å€¼é€šå¸¸æ„å‘³ç€æ›´å¥½çš„æ€§èƒ½ï¼Œå› ä¸ºæ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°æ»¡è¶³æ£€ç´¢ä»»åŠ¡çš„çº¦æŸã€‚

äº†è§£å®Œè¿™äº›å­—æ®µçš„å«ä¹‰åï¼Œ**å¦‚ä½•é€šè¿‡æ•°æ®å¾—åˆ°è®ºæ–‡çš„ç»“è®ºå‘¢ï¼Ÿ**

å›é¡¾ä¸€ä¸‹è®ºæ–‡çš„ç»“è®ºï¼š**åµŒå…¥æ¨¡å‹çš„è¡¨ç¤ºèƒ½åŠ›å—åˆ°å…¶ç»´åº¦çš„é™åˆ¶ï¼Œå¹¶ä¸”å­˜åœ¨ä¸€ä¸ª"ä¸´ç•Œç‚¹"ï¼Œåœ¨è¿™ä¸ªç‚¹ä¹‹åï¼Œæ¨¡å‹å³ä½¿åœ¨ç†è®ºæœ€ä½³æƒ…å†µä¸‹ä¹Ÿæ— æ³•å®Œå…¨æ•è·æ‰€æœ‰å¯èƒ½çš„æ–‡æ¡£ç»„åˆã€‚**

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹è§‚å¯Ÿæ¥å°è¯è¿™ä¸ªç»“è®ºï¼š

1.  **ç»´åº¦ `d` å¯¹å‡†ç¡®ç‡çš„å½±å“ï¼š**
    - ä¸è¦å¿˜è®°äº†ï¼Œè¿™é‡Œçš„næ˜¯èƒ½å¤Ÿè¢«æ¨¡å‹æˆåŠŸè¡¨ç¤ºçš„æ–‡æ¡£çš„æœ€å¤§æ•°é‡ï¼Œdæ˜¯åµŒå…¥å‘é‡çš„ç»´åº¦ã€‚
    *   å½“ `d=4` ä¸” `n=5` æ—¶ï¼Œ`actual_q_generated` æ˜¯ 10ï¼Œ`final_accuracy` æ˜¯ 1.0ã€‚è¿™æ„å‘³ç€åœ¨ `d=4` çš„ç»´åº¦ä¸‹ï¼Œæ¨¡å‹èƒ½å¤Ÿå®Œç¾åœ°è¡¨ç¤ºè¿™ 10 ç§ç»„åˆã€‚
    *   å½“ `d=4` ä¸” `n=6` æ—¶ï¼Œ`actual_q_generated` æ˜¯ 15ï¼Œ`final_accuracy` ä»ç„¶æ˜¯ 1.0ã€‚æ¨¡å‹ä¾ç„¶èƒ½å¤Ÿå®Œç¾è¡¨ç¤ºã€‚
    *   éšç€ `n` çš„å¢åŠ ï¼Œ`actual_q_generated` (å³éœ€è¦è¡¨ç¤ºçš„ç»„åˆæ•°é‡) ä¹Ÿä¼šè¿…é€Ÿå¢åŠ ã€‚
    *   ç„¶è€Œï¼Œå½“ä½ æŸ¥çœ‹ `n=11`, `n=12`, `n=13`, `n=14` çš„ç»“æœæ—¶ï¼Œä¼šå‘ç° `final_accuracy` å¼€å§‹ä¸‹é™ï¼Œå¹¶ä¸”ä¸å†æ˜¯ 1.0ã€‚ä¾‹å¦‚ï¼Œå¯¹äº `d=4` å’Œ `n=11`ï¼Œ`final_accuracy` é™åˆ°äº† 0.9090909090909091ã€‚è¿™è¡¨æ˜å½“æ–‡æ¡£æ•°é‡ `n` è¾¾åˆ°æŸä¸ªå€¼æ—¶ï¼Œå³ä½¿ç»´åº¦ `d` ä¿æŒä¸å˜ï¼Œæ¨¡å‹ä¹Ÿæ— æ³•å†å®Œç¾åœ°è¡¨ç¤ºæ‰€æœ‰ç»„åˆã€‚
    *   ä¸è¿‡ï¼Œdé€‰æ‹©4ã€5ã€6è¿™ç§æä½çš„ç»´åº¦ï¼šè¿™ç§æƒ…å†µä¸‹ï¼Œå®éªŒç»“æœæ›´å¤šåœ°åæ˜ äº†ç»´åº¦è¿‡ä½å¯¼è‡´çš„è¡¨ç¤ºèƒ½åŠ›ä¸è¶³ï¼Œè€Œä¸æ˜¯è®ºæ–‡æƒ³è¦å¼ºè°ƒçš„å³ä½¿åœ¨è¾ƒé«˜ç»´åº¦ä¸‹ï¼Œé¢å¯¹"æ‰€æœ‰ç»„åˆ"æ—¶çš„å›ºæœ‰å±€é™æ€§ã€‚
    *   æˆ‘çš„å»ºè®®æ˜¯ï¼Œä¸ºäº†æ›´å¥½åœ°ä½“ç°è®ºæ–‡åœ¨å®é™…æƒ…å†µä¸‹çš„é™åˆ¶ï¼Œä½ åº”è¯¥è‡³å°‘ä» d=32 å¼€å§‹ï¼Œå¹¶å°è¯•ä¸€äº›æ›´é«˜çš„ç»´åº¦ã€‚ï¼ˆæˆ‘åªæ˜¯å»ºè®®ï¼Œä½ å¯ä¸è¦çœŸçš„å°è¯•è¿™äº›ç»´åº¦ï¼Œå¤ªæ…¢äº†ã€‚ï¼‰

        æœ€ä½èµ·ç‚¹ï¼šd=32

        è¿™æ˜¯è®ºæ–‡ä¸­ SOTA æ¨¡å‹è¯„ä¼°çš„æœ€ä½ç»´åº¦ï¼ˆå‚è§ Figure 3 å’Œ Figure 4ï¼‰ã€‚
        ä»è¿™ä¸ªç‚¹å¼€å§‹ï¼Œä½ å¯ä»¥ç›´æ¥ä¸è®ºæ–‡ä¸­çš„ SOTA æ¨¡å‹åœ¨ä½ç»´åº¦ä¸‹çš„è¡¨ç°è¿›è¡Œæ¯”è¾ƒã€‚
        å¸¸è§å’Œæœ‰ä»£è¡¨æ€§çš„ç»´åº¦ï¼šd=128, 256, 512, 768, 1024

        è¿™äº›ç»´åº¦æ›´æ¥è¿‘çœŸå®ä¸–ç•Œä¸­åµŒå…¥æ¨¡å‹å¸¸ç”¨çš„ç»´åº¦ï¼Œå°¤å…¶æ˜¯åœ¨å„ç§é¢„è®­ç»ƒæ¨¡å‹ä¸­ã€‚
        d=768 å’Œ d=1024 å°¤å…¶é‡è¦ï¼Œå› ä¸ºå®ƒä»¬æ˜¯è®¸å¤šä¸»æµè¯­è¨€æ¨¡å‹ï¼ˆå¦‚ BERT base/large, RoBERTa ç­‰ï¼‰çš„é»˜è®¤è¾“å‡ºç»´åº¦ã€‚
        è®ºæ–‡ä¹Ÿæ˜ç¡®æŒ‡å‡º 1024 ç»´å¯¹åº” 400 ä¸‡æ–‡æ¡£çš„ Critical-nï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯å®é™…åº”ç”¨ä¸­çš„ä¸€ä¸ªé™åˆ¶ã€‚

        è¿™äº›æ˜¯è®ºæ–‡ä¸­è¯„ä¼°çš„æœ€é«˜ç»´åº¦ï¼Œèƒ½å¤Ÿæ˜¾ç¤ºåœ¨æ›´å¤§è§„æ¨¡æ–‡æ¡£é›†ä¸‹ï¼ˆå¦‚å‡ ç™¾ä¸‡åˆ°å‡ äº¿ï¼‰ï¼Œå³ä¾¿æ˜¯éå¸¸å¤§çš„ç»´åº¦ä¹Ÿæ— æ³•æ»¡è¶³æ‰€æœ‰ç»„åˆçš„éœ€æ±‚ã€‚
        å¦‚æœä½ çš„å®éªŒèµ„æºæœ‰é™ï¼Œå¯ä»¥ä¼˜å…ˆè€ƒè™‘ä¸Šè¿°"å¸¸è§å’Œæœ‰ä»£è¡¨æ€§"çš„ç»´åº¦ï¼Œæˆ‘è¿™é‡Œå°±åªå°è¯•äº†4ã€5ã€6äº†ã€‚

2.  **"ä¸´ç•Œç‚¹"çš„ä½“ç°ï¼š**
    *   å¯¹äºæ¯ä¸ªå›ºå®šçš„ç»´åº¦ `d`ï¼Œä¼šæœ‰ä¸€ä¸ª `n` çš„æœ€å¤§å€¼ï¼Œæ¨¡å‹èƒ½å¤Ÿä»¥ 100% çš„å‡†ç¡®ç‡è¡¨ç¤ºæ‰€æœ‰ç»„åˆã€‚ä¸€æ—¦ `n` è¶…è¿‡è¿™ä¸ª"ä¸´ç•Œå€¼"ï¼Œå‡†ç¡®ç‡å°±ä¼šä¸‹é™ã€‚
    *   è¡¨æ ¼ 6 (Table 6) ä¸­åˆ—å‡ºäº† `d` å’Œå¯¹åº”çš„ `Critical-n` å€¼ï¼Œè¿™ç›´æ¥å±•ç¤ºäº†åœ¨ä¸åŒçš„åµŒå…¥ç»´åº¦ `d` ä¸‹ï¼Œæ¨¡å‹èƒ½å¤ŸæˆåŠŸè¡¨ç¤ºæ‰€æœ‰ top-k ç»„åˆçš„æœ€å¤§æ–‡æ¡£æ•°é‡ `n`ã€‚ä¾‹å¦‚ï¼Œå½“ `d=4` æ—¶ï¼Œ`Critical-n` æ˜¯ 10ã€‚è¿™ä¸ä½ åœ¨ `n=11` è§‚å¯Ÿåˆ°çš„å‡†ç¡®ç‡ä¸‹é™ç›¸å»åˆã€‚

3.  **æŸå¤±å€¼çš„å˜åŒ–ï¼š**
    *   éšç€ `n` è¶…è¿‡ `Critical-n`ï¼Œå³ä½¿æŸå¤±å€¼å¯èƒ½ä¼šæŒç»­ä¸‹é™ï¼Œä½†å‡†ç¡®ç‡å´æ— æ³•è¾¾åˆ° 1.0ã€‚è¿™è¿›ä¸€æ­¥æ”¯æŒäº†å³ä½¿åœ¨æœ€ä½³ä¼˜åŒ–æƒ…å†µä¸‹ï¼Œæ¨¡å‹ä¹Ÿæ— æ³•å®Œç¾æ•è·æ‰€æœ‰ç»„åˆçš„è§‚ç‚¹ã€‚

ç®€è€Œè¨€ä¹‹ï¼Œè¿™äº›æ•°æ®å®è¯åœ°éªŒè¯äº†ï¼Œå¯¹äºç»™å®šçš„åµŒå…¥ç»´åº¦ `d` å’Œ `k`ï¼Œå­˜åœ¨ä¸€ä¸ªæ–‡æ¡£æ•°é‡ `n` çš„ä¸Šé™ï¼Œè¶…è¿‡è¿™ä¸ªä¸Šé™ï¼Œå³ä½¿æ˜¯ç»è¿‡æœ€ä½³ä¼˜åŒ–çš„åµŒå…¥æ¨¡å‹ä¹Ÿæ— æ³•å®Œç¾åœ°è¡¨ç¤ºæ‰€æœ‰å¯èƒ½çš„ top-k æ–‡æ¡£ç»„åˆã€‚è¿™å°±æ˜¯è®ºæ–‡æ‰€æŒ‡å‡ºçš„**åµŒå…¥æ¨¡å‹åœ¨è¡¨ç¤ºèƒ½åŠ›ä¸Šçš„ç†è®ºå±€é™æ€§**ã€‚

---

## 1. æ•°æ®é›†æ ¼å¼

### ä¸»è¦åŒ…å«å“ªäº›å†…å®¹ï¼Ÿ

ä» Notebook çš„ç»“æ„æ¥çœ‹ï¼ŒLIMIT æ•°æ®é›†ä¸»è¦ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š

#### 1 ç”¨æˆ·æ•°æ®
- **åå­—å’Œå§“æ°**ï¼šä»å…¬å¼€æºä¸‹è½½å¤§é‡çš„è‹±æ–‡åå­—å’Œå§“æ°ï¼Œç»„åˆæˆå”¯ä¸€ç”¨æˆ·ï¼Œä¾‹å¦‚ï¼š`Alice Smith`, `Bob Johnson`ã€‚
- **å”¯ä¸€æ€§**ï¼šå»é‡åæœ‰çº¦2700å¤šä¸ªåå­—ï¼Œ1000å¤šä¸ªå§“æ°ã€‚å¯ä»¥ç»„æˆä¸Šç™¾ä¸‡ä¸ªç‹¬ç«‹ç”¨æˆ·ã€‚

#### 2 ç‰©å“æ•°æ®
- **items_to_like**ï¼šè¿™æ˜¯ä¸€ä¸ªè¶…é•¿çš„ç‰©å“åˆ—è¡¨ï¼ŒåŒ…æ‹¬ï¼š
  - é£Ÿç‰©ï¼ˆæ°´æœã€è”¬èœã€è‚‰ç±»ã€é¥®æ–™ï¼‰
  - åŠ¨ç‰©ï¼ˆå® ç‰©ã€é‡ç”ŸåŠ¨ç‰©ã€æ˜†è™«ç­‰ï¼‰
  - æ¤ç‰©ï¼ˆèŠ±ã€æ ‘ã€è‰è¯ç­‰ï¼‰
  - è‡ªç„¶ç°è±¡ï¼ˆé›¨ã€é›ªã€äº‘ã€æœˆäº®ç­‰ï¼‰
  - è¿åŠ¨ä¸æ´»åŠ¨ï¼ˆè¶³çƒã€æ¸¸æ³³ã€å¾’æ­¥ç­‰ï¼‰
  - å…¶ä»–ç±»åˆ«ï¼ˆè›‹ç³•ã€ç³–æœã€é¢åŒ…ã€è°ƒå‘³æ–™ç­‰ï¼‰

#### 3 ç”¨æˆ·åå¥½
- **æ ¼å¼ä¸¾ä¾‹**ï¼š
  - æ¯ä¸ªç”¨æˆ·å¯ä»¥"å–œæ¬¢"è‹¥å¹²ç‰©å“ï¼Œé€šå¸¸ä»¥è¡¨æ ¼æˆ– JSON çš„å½¢å¼å­˜å‚¨ï¼š
    - CSV:  
      | user_name   | item              |
      |-------------|-------------------|
      | Alice Smith | Apple             |
      | Bob Johnson | Soccer            |
    - JSON:
      ```json
      [
        {"user": "Alice Smith", "likes": ["Apple", "Soccer", "Rain"]},
        {"user": "Bob Johnson", "likes": ["Banana", "Basketball"]}
      ]
      ```
- **ç”Ÿæˆæ–¹å¼**ï¼šå¯ä»¥éšæœºåˆ†é…æ¯ä¸ªç”¨æˆ·å–œæ¬¢çš„ç‰©å“æ•°é‡ï¼ˆå¦‚æ¯äºº5-10ä¸ªï¼‰ï¼Œæ ¹æ®å®é™…éœ€è¦ç”Ÿæˆäº¤äº’æ•°æ®ã€‚

---

## ç»“æœæ–‡ä»¶çš„å«ä¹‰

* "final_accuracy"ï¼šæ¯ä¸ª N çš„æœ€ç»ˆå‡†ç¡®ç‡
* "final_loss"ï¼šä¼˜åŒ–ç»ˆç‚¹çš„ loss
* "max_accuracy_observed"ï¼šæ•´ä¸ª 10w æ¬¡è¿­ä»£ä¸­çš„æœ€å¤§å‡†ç¡®ç‡
* "actual_q_generated"ï¼šå®é™…é‡‡æ ·åˆ°çš„ query/ç›¸å…³æ–‡æ¡£é…ç½®æ€»æ•°
* "optimization_duration_seconds"ï¼šä¼˜åŒ–è¿‡ç¨‹æ‰€ç”¨æ—¶é—´
* "accuracies"/"losses"ï¼šæ¯éš”ä¸€æ®µè¿­ä»£è®°å½•çš„å‡†ç¡®ç‡/loss æ›²çº¿ï¼Œå¯ç”¨äºç”»å›¾åˆ†ææ¨¡å‹æ”¶æ•›è¿‡ç¨‹

æˆ‘ä»¬ä»d=3çš„ç»“æœæ–‡ä»¶æ¥çœ‹ï¼Œè¿™äº›æ•°æ®æ˜¯è®ºæ–‡ä¸­"Free Embedding Optimization"å®éªŒçš„ç»“æœï¼Œå®ƒæ¨¡æ‹Ÿäº†åœ¨ä¸åŒç»´åº¦ (d) ä¸‹ï¼ŒåµŒå…¥æ¨¡å‹ç†è®ºä¸Šèƒ½å¤Ÿæ•è·çš„æ–‡æ¡£ç»„åˆæ•°é‡ã€‚è¿™äº›æ•°æ®å¯¹äºç†è§£è®ºæ–‡çš„æ ¸å¿ƒç»“è®ºè‡³å…³é‡è¦ã€‚

è®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹è¿™äº›æ•°æ®çš„å«ä¹‰ï¼Œä»¥åŠå®ƒä»¬å¦‚ä½•æ”¯æŒè®ºæ–‡çš„ç»“è®ºï¼š

* d: è¿™æ˜¯åµŒå…¥çš„ç»´åº¦ã€‚è®ºæ–‡çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼ŒåµŒå…¥çš„ç»´åº¦æ˜¯é™åˆ¶æ¨¡å‹è¡¨ç¤ºæ–‡æ¡£ç»„åˆèƒ½åŠ›çš„å…³é”®å› ç´ ã€‚

* n: è¿™æ˜¯æ–‡æ¡£çš„æ•°é‡ã€‚åœ¨è¿™äº›å®éªŒä¸­ï¼Œn æ˜¯æŒ‡èƒ½å¤Ÿè¢«æ¨¡å‹æˆåŠŸè¡¨ç¤ºçš„æ–‡æ¡£çš„æœ€å¤§æ•°é‡ï¼ŒåŒæ—¶ä¿æŒç»™å®šçš„ç»´åº¦ d å’Œ k (top-k ç»„åˆä¸­çš„ k)ã€‚

* k: è¿™æ˜¯ "top-k" ç»„åˆä¸­çš„ k å€¼ã€‚åœ¨è¿™äº›å®éªŒä¸­ï¼Œk å›ºå®šä¸º 2ï¼Œæ„å‘³ç€æ¨¡å‹éœ€è¦è¯†åˆ«å‡ºä¸¤ä¸ªç›¸å…³çš„æ–‡æ¡£ã€‚

actual_q_generated: è¿™ä»£è¡¨åœ¨ç»™å®š n å’Œ k çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å¯èƒ½çš„ top-k ç›¸å…³æ–‡æ¡£ç»„åˆçš„å®é™…æ•°é‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ n=5 ä¸” k=2ï¼Œåˆ™å¯èƒ½çš„ç»„åˆæ•°é‡ä¸º $\binom{5}{2} = \frac{5 \times 4}{2 \times 1} = 10$ã€‚

final_accuracy å’Œ max_accuracy_observed: è¿™äº›æŒ‡æ ‡è¡¨ç¤ºæ¨¡å‹åœ¨ç»™å®šç»´åº¦ d ä¸‹æˆåŠŸæ•è·æ‰€æœ‰ç›¸å…³æ–‡æ¡£ç»„åˆçš„å‡†ç¡®æ€§ã€‚1.0 çš„å‡†ç¡®ç‡æ„å‘³ç€æ¨¡å‹èƒ½å¤Ÿå®Œç¾åœ°è¡¨ç¤ºæ‰€æœ‰ç»„åˆã€‚

final_loss å’Œ best_loss_monitored: è¿™äº›æ˜¯ä¼˜åŒ–è¿‡ç¨‹ä¸­çš„æŸå¤±å€¼ã€‚è¾ƒä½çš„æŸå¤±å€¼é€šå¸¸æ„å‘³ç€æ›´å¥½çš„æ€§èƒ½ï¼Œå› ä¸ºæ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°æ»¡è¶³æ£€ç´¢ä»»åŠ¡çš„çº¦æŸã€‚

## å¦‚ä½•é€šè¿‡æ•°æ®å¾—åˆ°è®ºæ–‡çš„ç»“è®ºï¼š

è®ºæ–‡çš„ç»“è®ºæ˜¯ï¼ŒåµŒå…¥æ¨¡å‹çš„è¡¨ç¤ºèƒ½åŠ›å—åˆ°å…¶ç»´åº¦çš„é™åˆ¶ï¼Œå¹¶ä¸”å­˜åœ¨ä¸€ä¸ª"ä¸´ç•Œç‚¹"ï¼ˆcritical-nï¼‰ï¼Œåœ¨è¿™ä¸ªç‚¹ä¹‹åï¼Œæ¨¡å‹å³ä½¿åœ¨ç†è®ºæœ€ä½³æƒ…å†µä¸‹ä¹Ÿæ— æ³•å®Œå…¨æ•è·æ‰€æœ‰å¯èƒ½çš„æ–‡æ¡£ç»„åˆã€‚
ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹è§‚å¯Ÿæ¥å°è¯è¿™ä¸ªç»“è®ºï¼š

ç»´åº¦ d å¯¹å‡†ç¡®ç‡çš„å½±å“ï¼š

* å½“ d=4 ä¸” n=5 æ—¶ï¼Œactual_q_generated æ˜¯ 10ï¼Œfinal_accuracy æ˜¯ 1.0ã€‚è¿™æ„å‘³ç€åœ¨ d=4 çš„ç»´åº¦ä¸‹ï¼Œæ¨¡å‹èƒ½å¤Ÿå®Œç¾åœ°è¡¨ç¤ºè¿™ 10 ç§ç»„åˆã€‚

* å½“ d=4 ä¸” n=6 æ—¶ï¼Œactual_q_generated æ˜¯ 15ï¼Œfinal_accuracy ä»ç„¶æ˜¯ 1.0ã€‚æ¨¡å‹ä¾ç„¶èƒ½å¤Ÿå®Œç¾è¡¨ç¤ºã€‚

éšç€ n çš„å¢åŠ ï¼Œactual_q_generated (å³éœ€è¦è¡¨ç¤ºçš„ç»„åˆæ•°é‡) ä¹Ÿä¼šè¿…é€Ÿå¢åŠ ã€‚

ç„¶è€Œï¼Œå½“ä½ æŸ¥çœ‹ n=11, n=12, n=13, n=14 çš„ç»“æœæ—¶ï¼Œä¼šå‘ç° final_accuracy å¼€å§‹ä¸‹é™ï¼Œå¹¶ä¸”ä¸å†æ˜¯ 1.0ã€‚ä¾‹å¦‚ï¼Œå¯¹äº d=4 å’Œ n=11ï¼Œfinal_accuracy é™åˆ°äº† 0.9090909090909091ã€‚è¿™è¡¨æ˜å½“æ–‡æ¡£æ•°é‡ n è¾¾åˆ°æŸä¸ªå€¼æ—¶ï¼Œå³ä½¿ç»´åº¦ d ä¿æŒä¸å˜ï¼Œæ¨¡å‹ä¹Ÿæ— æ³•å†å®Œç¾åœ°è¡¨ç¤ºæ‰€æœ‰ç»„åˆã€‚

### "ä¸´ç•Œç‚¹"çš„ä½“ç°ï¼š

å¯¹äºæ¯ä¸ªå›ºå®šçš„ç»´åº¦ dï¼Œä¼šæœ‰ä¸€ä¸ª n çš„æœ€å¤§å€¼ï¼Œæ¨¡å‹èƒ½å¤Ÿä»¥ 100% çš„å‡†ç¡®ç‡è¡¨ç¤ºæ‰€æœ‰ç»„åˆã€‚ä¸€æ—¦ n è¶…è¿‡è¿™ä¸ª"ä¸´ç•Œå€¼"ï¼Œå‡†ç¡®ç‡å°±ä¼šä¸‹é™ã€‚

è¡¨æ ¼ 6 (Table 6) ä¸­åˆ—å‡ºäº† d å’Œå¯¹åº”çš„ Critical-n å€¼ï¼Œè¿™ç›´æ¥å±•ç¤ºäº†åœ¨ä¸åŒçš„åµŒå…¥ç»´åº¦ d ä¸‹ï¼Œæ¨¡å‹èƒ½å¤ŸæˆåŠŸè¡¨ç¤ºæ‰€æœ‰ top-k ç»„åˆçš„æœ€å¤§æ–‡æ¡£æ•°é‡ nã€‚ä¾‹å¦‚ï¼Œå½“ d=4 æ—¶ï¼ŒCritical-n æ˜¯ 10ã€‚è¿™ä¸ä½ åœ¨ n=11 è§‚å¯Ÿåˆ°çš„å‡†ç¡®ç‡ä¸‹é™ç›¸å»åˆã€‚

### æŸå¤±å€¼çš„å˜åŒ–ï¼š

éšç€ n è¶…è¿‡ Critical-nï¼Œå³ä½¿æŸå¤±å€¼å¯èƒ½ä¼šæŒç»­ä¸‹é™ï¼Œä½†å‡†ç¡®ç‡å´æ— æ³•è¾¾åˆ° 1.0ã€‚è¿™è¿›ä¸€æ­¥æ”¯æŒäº†å³ä½¿åœ¨æœ€ä½³ä¼˜åŒ–æƒ…å†µä¸‹ï¼Œæ¨¡å‹ä¹Ÿæ— æ³•å®Œç¾æ•è·æ‰€æœ‰ç»„åˆçš„è§‚ç‚¹ã€‚

ç®€è€Œè¨€ä¹‹ï¼Œè¿™äº›æ•°æ®å®è¯åœ°éªŒè¯äº†ï¼Œå¯¹äºç»™å®šçš„åµŒå…¥ç»´åº¦ d å’Œ kï¼Œå­˜åœ¨ä¸€ä¸ªæ–‡æ¡£æ•°é‡ n çš„ä¸Šé™ï¼Œè¶…è¿‡è¿™ä¸ªä¸Šé™ï¼Œå³ä½¿æ˜¯ç»è¿‡æœ€ä½³ä¼˜åŒ–çš„åµŒå…¥æ¨¡å‹ä¹Ÿæ— æ³•å®Œç¾åœ°è¡¨ç¤ºæ‰€æœ‰å¯èƒ½çš„ top-k æ–‡æ¡£ç»„åˆã€‚è¿™å°±æ˜¯è®ºæ–‡æ‰€æŒ‡å‡ºçš„åµŒå…¥æ¨¡å‹åœ¨è¡¨ç¤ºèƒ½åŠ›ä¸Šçš„ç†è®ºå±€é™æ€§ã€‚

## ç»“æœå›¾ç‰‡çš„å«ä¹‰

![](/images/image0.png)

è¿™å¼ å›¾è¡¨å±•ç¤ºäº†åœ¨ç‰¹å®šåµŒå…¥ç»´åº¦ d å’Œ kï¼ˆåœ¨è¿™ä¸ªå®éªŒä¸­ d=4, k=2ï¼‰ä¸‹ï¼Œéšç€æ–‡æ¡£æ•°é‡ N çš„å¢åŠ ï¼Œæœ€ç»ˆå‡†ç¡®ç‡ (final_accuracy) çš„å˜åŒ–ã€‚

X è½´ (N)ï¼šè¿™ä»£è¡¨äº†æ–‡æ¡£çš„æ•°é‡ã€‚åœ¨è¿™äº›å®éªŒä¸­ï¼ŒN çš„å€¼ä» 5 å¼€å§‹é€æ¸å¢åŠ ã€‚

Y è½´ (final_accuracy)ï¼šè¿™è¡¨ç¤ºæ¨¡å‹åœ¨ç»™å®š N å€¼ä¸‹ï¼Œèƒ½å¤Ÿæ­£ç¡®æ•è·æ‰€æœ‰ top-k ç›¸å…³æ–‡æ¡£ç»„åˆçš„å‡†ç¡®ç‡ã€‚1.00 è¡¨ç¤º 100% çš„å‡†ç¡®ç‡ï¼Œæ„å‘³ç€æ¨¡å‹å®Œç¾åœ°å®Œæˆäº†ä»»åŠ¡ã€‚

è¿™å¼ å›¾ç›´è§‚åœ°å±•ç¤ºäº†è®ºæ–‡ä¸­å…³äºåµŒå…¥æ¨¡å‹è¡¨ç¤ºèƒ½åŠ›å±€é™æ€§çš„æ ¸å¿ƒè§‚ç‚¹ï¼šåµŒå…¥æ¨¡å‹çš„è¡¨ç¤ºèƒ½åŠ›æ˜¯æœ‰é™çš„ï¼Œå¹¶ä¸”å½“éœ€è¦å¤„ç†çš„æ–‡æ¡£ç»„åˆæ•°é‡è¶…è¿‡æŸä¸ªä¸´ç•Œå€¼æ—¶ï¼Œå³ä½¿æ˜¯ç®€å•ä»»åŠ¡ï¼Œæ¨¡å‹ä¹Ÿæ— æ³•å®Œç¾å®Œæˆã€‚

åˆå§‹é˜¶æ®µçš„é«˜å‡†ç¡®ç‡ï¼šä½ å¯ä»¥çœ‹åˆ°ï¼Œå½“ N è¾ƒå°ï¼ˆä¾‹å¦‚ N=5, N=6, N=7ï¼‰æ—¶ï¼Œfinal_accuracy ä¿æŒåœ¨ 1.00ï¼Œè¿™æ„å‘³ç€æ¨¡å‹èƒ½å¤Ÿå®Œç¾åœ°è¡¨ç¤ºæ‰€æœ‰ç»„åˆã€‚è¿™ä¸æˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„æ•°æ®ç»“æœä¸€è‡´ï¼Œè¡¨æ˜åœ¨æ–‡æ¡£æ•°é‡ä¸å¤šæ—¶ï¼Œæ¨¡å‹å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œã€‚

"ä¸´ç•Œç‚¹"çš„å‡ºç°ï¼šå½“ N å¢åŠ åˆ° 8 ä¹‹åï¼Œå›¾è¡¨ä¸Šå‡ºç°äº†ä¸€ä¸ªè½¬æŠ˜ç‚¹ã€‚è™½ç„¶åœ¨ N=8 æ—¶å‡†ç¡®ç‡ä»ç„¶æ˜¯ 1.00ï¼Œä½†éšååœ¨ N è¿›ä¸€æ­¥å¢åŠ æ—¶ï¼Œfinal_accuracy å¼€å§‹æ˜¾è‘—ä¸‹é™ï¼ˆä¾‹å¦‚ï¼ŒN=10 æ—¶å¤§çº¦æ˜¯ 0.96ï¼ŒN=11 æ—¶å¤§çº¦æ˜¯ 0.91ï¼‰ã€‚è¿™ä¸ªä¸‹é™è¶‹åŠ¿è¡¨æ˜ï¼Œéšç€éœ€è¦è¡¨ç¤ºçš„æ–‡æ¡£ç»„åˆæ•°é‡çš„å¢åŠ ï¼Œå³ä½¿æ˜¯ç»è¿‡ä¼˜åŒ–çš„åµŒå…¥æ¨¡å‹ä¹Ÿæ— æ³•å†ä¿æŒ 100% çš„å‡†ç¡®ç‡ã€‚

è¡¨ç¤ºèƒ½åŠ›çš„å±€é™æ€§ï¼šå‡†ç¡®ç‡çš„ä¸‹é™æ¸…æ¥šåœ°è¡¨æ˜ï¼Œå¯¹äºç»™å®šçš„åµŒå…¥ç»´åº¦ï¼ˆè¿™é‡Œæ˜¯ d=4ï¼‰ï¼Œå­˜åœ¨ä¸€ä¸ªæ–‡æ¡£æ•°é‡çš„"ä¸´ç•Œå€¼"ï¼ˆCritical-nï¼‰ã€‚ä¸€æ—¦æ–‡æ¡£æ•°é‡è¶…è¿‡è¿™ä¸ªå€¼ï¼Œæ¨¡å‹å°±æ— æ³•å®Œå…¨æ•è·æ‰€æœ‰å¯èƒ½çš„æ–‡æ¡£ç»„åˆã€‚è¿™å¼ å›¾å½¢è±¡åœ°å±•ç¤ºäº†è¡¨æ ¼ 6 ä¸­ d=4 å¯¹åº”çš„ Critical-n å€¼ï¼ˆå³ 10ï¼‰ä»¥åŠä¹‹åå‡†ç¡®ç‡çš„ä¸‹é™ã€‚

ç°åœ¨æˆ‘ä»¬ç»¼åˆä¸€ä¸‹ï¼Œå½“d=4\\5\\6çš„æ—¶å€™ï¼Œç»“æœå›¾ä»¥åŠå…¶ä¸ºæˆ‘ä»¬æ‰€å±•ç¤ºçš„å«ä¹‰

![](/images/image1.png)

è¿™å¼ å›¾è¡¨é€šè¿‡ä¸‰æ¡ä¸åŒé¢œè‰²çš„çº¿ï¼Œæç»˜äº†åœ¨ `k=2` çš„æƒ…å†µä¸‹ï¼Œä¸åŒåµŒå…¥ç»´åº¦ (`d=4`, `d=5`, `d=6`) å¦‚ä½•å½±å“æ¨¡å‹è¯†åˆ«æ‰€æœ‰å¯èƒ½æ–‡æ¡£ç»„åˆçš„å‡†ç¡®ç‡ã€‚
**ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š**
*   **ç»´åº¦ `d` å¯¹"ä¸´ç•Œç‚¹"çš„å½±å“**ï¼š
    *   å¯¹äº `d=4` (è“è‰²çº¿)ï¼Œå‡†ç¡®ç‡åœ¨æ–‡æ¡£æ•°é‡ `N=10` æ—¶å¼€å§‹ä» 1.00 ä¸‹é™ã€‚è¿™æ„å‘³ç€å½“ç»´åº¦ä¸º 4 æ—¶ï¼Œæ¨¡å‹èƒ½å¤Ÿå®Œç¾è¡¨ç¤ºçš„æœ€å¤§æ–‡æ¡£æ•°é‡ï¼ˆ`Critical-n`ï¼‰æ˜¯ 10ã€‚
    *   å¯¹äº `d=5` (æ©™è‰²çº¿)ï¼Œå‡†ç¡®ç‡åœ¨æ–‡æ¡£æ•°é‡ `N=14` æ—¶å¼€å§‹ä» 1.00 ä¸‹é™ã€‚è¿™æ„å‘³ç€å½“ç»´åº¦ä¸º 5 æ—¶ï¼Œ`Critical-n` æ˜¯ 14ã€‚
    *   å¯¹äº `d=6` (ç»¿è‰²çº¿)ï¼Œå‡†ç¡®ç‡åœ¨æ–‡æ¡£æ•°é‡ `N=19` æ—¶å¼€å§‹ä» 1.00 ä¸‹é™ã€‚è¿™æ„å‘³ç€å½“ç»´åº¦ä¸º 6 æ—¶ï¼Œ`Critical-n` æ˜¯ 19ã€‚
    *   ...
    *   è¿™æ˜ç¡®è¡¨æ˜ï¼Œ**åµŒå…¥ç»´åº¦è¶Šé«˜ï¼Œæ¨¡å‹èƒ½å¤Ÿå®Œç¾è¡¨ç¤ºæ‰€æœ‰å¯èƒ½ç»„åˆçš„æ–‡æ¡£æ•°é‡å°±è¶Šå¤š**ã€‚

*   **è®ºæ–‡ç»“è®ºçš„ç›´è§‚å±•ç¤º**ï¼š
    *   è¿™å¼ å›¾ç›´æ¥å±•ç¤ºäº†è®ºæ–‡çš„æ ¸å¿ƒè§‚ç‚¹ï¼š**åµŒå…¥æ¨¡å‹çš„è¡¨ç¤ºèƒ½åŠ›å—åˆ°å…¶ç»´åº¦çš„æ ¹æœ¬æ€§é™åˆ¶**ã€‚
    *   å¯¹äºæ¯ä¸ªå›ºå®šçš„ç»´åº¦ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªæ–‡æ¡£æ•°é‡çš„ä¸Šé™ï¼ˆå³ `Critical-n`ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªä¸Šé™ï¼Œå³ä½¿æ˜¯ç†æƒ³çš„åµŒå…¥æ¨¡å‹ä¹Ÿæ— æ³•å®Œç¾åœ°è¡¨ç¤ºæ‰€æœ‰å¯èƒ½çš„æ–‡æ¡£ç»„åˆã€‚æ›´é«˜çš„ç»´åº¦ç¡®å®å…è®¸æ¨¡å‹å¤„ç†æ›´å¤šçš„æ–‡æ¡£ï¼Œä½†è¿™ç§å±€é™æ€§ä»ç„¶å­˜åœ¨ã€‚

è¿™å¼ å›¾è¡¨çš„æ•°æ®ä¸è®ºæ–‡ä¸­çš„ Table 6 æ˜¯å»åˆçš„ã€‚Table 6 åˆ—å‡ºçš„ `Critical-n` å€¼å°±æ˜¯å›¾ä¸­å‡†ç¡®ç‡é¦–æ¬¡ä» 1.00 ä¸‹é™æ—¶çš„ `N` å€¼ã€‚

![](/images/table6.bmp)

*   Table 6 æ˜¾ç¤º `d=4` å¯¹åº” `Critical-n=10`ã€‚
*   `d=5` å¯¹åº” `Critical-n=14`ã€‚
*   `d=6` å¯¹åº” `Critical-n=19`ã€‚


å¦‚æœä½ å°è¯• 128 æˆ– 1024 ç»´åº¦çš„ä¸´ç•Œå€¼ï¼Œæ­£å¦‚æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„ï¼Œç†è®ºä¸Šå®ƒä»¬èƒ½å¤Ÿè¡¨ç¤ºçš„æ–‡æ¡£æ•°é‡ä¼šæ›´å¤šï¼ˆå¦‚ Table 6 ä¸­çš„å¤–æ¨å€¼ï¼‰ã€‚ç„¶è€Œï¼Œ**è®¡ç®—è¿™äº›é«˜ç»´åº¦çš„ `Critical-n` ä¼šå˜å¾—éå¸¸å¤æ‚å’Œè€—æ—¶**ï¼Œå› ä¸ºå¯èƒ½çš„æ–‡æ¡£ç»„åˆæ•°é‡ä¼šå‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œè®ºæ–‡ä¸­ä¹Ÿæåˆ°äº†è®¡ç®—çš„éš¾åº¦ï¼Œæ‰€ä»¥ï¼Œè¯•ä¸€è¯•ä½ç»´çš„å°±å¯ä»¥ï¼Œå‰©ä¸‹çš„æ—¶é—´å»åƒä¸ªå¤§ç›˜é¸¡(ã€€o=^â€¢ã‚§â€¢)oğŸšã€‚